var q={};q.d=(r,e)=>{for(var t in e)q.o(e,t)&&!q.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})};q.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var T=globalThis.pdfjsViewer={};q.d(T,{AnnotationLayerBuilder:()=>ct,DownloadManager:()=>gi,EventBus:()=>dt,FindState:()=>$,GenericL10n:()=>H,LinkTarget:()=>K,PDFFindController:()=>ii,PDFHistory:()=>fn,PDFLinkService:()=>ge,PDFPageView:()=>Et,PDFScriptingManager:()=>Ln,PDFSinglePageViewer:()=>Cn,PDFViewer:()=>wt,ProgressBar:()=>Mt,RenderingStates:()=>R,ScrollMode:()=>S,SimpleLinkService:()=>Ae,SpreadMode:()=>M,StructTreeLayerBuilder:()=>mt,TextLayerBuilder:()=>Q,XfaLayerBuilder:()=>bt,parseQueryString:()=>pe});const yt="auto",lt=1,Te=1.1,vt=.1,Pt=10,be=0,xt=1.25,Ce=40,Re=5,R={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},X={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},O={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},S={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},M={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class St{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}}function ht(r,e,t=!1){let i=r.offsetParent;if(!i){console.error("offsetParent is not set -- cannot scroll");return}let n=r.offsetTop+r.clientTop,s=r.offsetLeft+r.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||t&&(i.classList.contains("markedContent")||getComputedStyle(i).overflow==="hidden");)if(n+=i.offsetTop,s+=i.offsetLeft,i=i.offsetParent,!i)return;e&&(e.top!==void 0&&(n+=e.top),e.left!==void 0&&(s+=e.left,i.scrollLeft=s)),i.scrollTop=n}function Lt(r,e,t=void 0){const i=function(a){s||(s=window.requestAnimationFrame(function(){s=null;const l=r.scrollLeft,h=n.lastX;l!==h&&(n.right=l>h),n.lastX=l;const u=r.scrollTop,f=n.lastY;u!==f&&(n.down=u>f),n.lastY=u,e(n)}))},n={right:!0,down:!0,lastX:r.scrollLeft,lastY:r.scrollTop,_eventHandler:i};let s=null;return r.addEventListener("scroll",i,{useCapture:!0,signal:t}),t?.addEventListener("abort",()=>window.cancelAnimationFrame(s),{once:!0}),n}function pe(r){const e=new Map;for(const[t,i]of new URLSearchParams(r))e.set(t.toLowerCase(),i);return e}const Ne=/[\x00-\x1F]/g;function ue(r,e=!1){return Ne.test(r)?e?r.replaceAll(Ne,t=>t==="\0"?"":" "):r.replaceAll("\0",""):r}function ie(r,e,t=0){let i=t,n=r.length-1;if(n<0||!e(r[n]))return r.length;if(e(r[i]))return i;for(;i<n;){const s=i+n>>1,a=r[s];e(a)?n=s:i=s+1}return i}function Me(r){if(Math.floor(r)===r)return[r,1];const e=1/r,t=8;if(e>t)return[1,t];if(Math.floor(e)===e)return[1,e];const i=r>1?e:r;let n=0,s=1,a=1,o=1;for(;;){const h=n+a,u=s+o;if(u>t)break;i<=h/u?(a=h,o=u):(n=h,s=u)}let l;return i-n/s<a/o-i?l=i===r?[n,s]:[s,n]:l=i===r?[a,o]:[o,a],l}function re(r,e){return r-r%e}function It(r,e,t){if(r<2)return r;let i=e[r].div,n=i.offsetTop+i.clientTop;n>=t&&(i=e[r-1].div,n=i.offsetTop+i.clientTop);for(let s=r-2;s>=0&&(i=e[s].div,!(i.offsetTop+i.clientTop+i.clientHeight<=n));--s)r=s;return r}function At({scrollEl:r,views:e,sortByVisibility:t=!1,horizontal:i=!1,rtl:n=!1}){const s=r.scrollTop,a=s+r.clientHeight,o=r.scrollLeft,l=o+r.clientWidth;function h(L){const w=L.div;return w.offsetTop+w.clientTop+w.clientHeight>s}function u(L){const w=L.div,E=w.offsetLeft+w.clientLeft,I=E+w.clientWidth;return n?E<l:I>o}const f=[],p=new Set,y=e.length;let b=ie(e,i?u:h);b>0&&b<y&&!i&&(b=It(b,e,s));let v=i?l:-1;for(let L=b;L<y;L++){const w=e[L],E=w.div,I=E.offsetLeft+E.clientLeft,m=E.offsetTop+E.clientTop,_=E.clientWidth,P=E.clientHeight,c=I+_,g=m+P;if(v===-1)g>=a&&(v=g);else if((i?I:m)>v)break;if(g<=s||m>=a||c<=o||I>=l)continue;const A=Math.max(0,s-m)+Math.max(0,g-a),D=Math.max(0,o-I)+Math.max(0,c-l),j=(P-A)/P,k=(_-D)/_,_t=j*k*100|0;f.push({id:w.id,x:I,y:m,view:w,percent:_t,widthPercent:k*100|0}),p.add(w.id)}const C=f[0],x=f.at(-1);return t&&f.sort(function(L,w){const E=L.percent-w.percent;return Math.abs(E)>.001?-E:L.id-w.id}),{first:C,last:x,views:f,ids:p}}function ut(r){return Number.isInteger(r)&&r%90===0}function Tt(r){return Number.isInteger(r)&&Object.values(S).includes(r)&&r!==S.UNKNOWN}function Ct(r){return Number.isInteger(r)&&Object.values(M).includes(r)&&r!==M.UNKNOWN}function ke(r){return r.width<=r.height}new Promise(function(r){window.requestAnimationFrame(r)});const Rt=document.documentElement.style;function Nt(r,e,t){return Math.min(Math.max(r,e),t)}class Mt{#e=null;#t=null;#s=0;#n=null;#i=!0;constructor(e){this.#e=e.classList,this.#n=e.style}get percent(){return this.#s}set percent(e){if(this.#s=Nt(e,0,100),isNaN(e)){this.#e.add("indeterminate");return}this.#e.remove("indeterminate"),this.#n.setProperty("--progressBar-percent",`${this.#s}%`)}setWidth(e){if(!e)return;const i=e.parentNode.offsetWidth-e.offsetWidth;i>0&&this.#n.setProperty("--progressBar-end-offset",`${i}px`)}setDisableAutoFetch(e=5e3){isNaN(this.#s)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#i&&(this.#i=!1,this.#e.add("hidden"))}show(){this.#i||(this.#i=!0,this.#e.remove("hidden"))}}function kt(r){let e=S.VERTICAL,t=M.NONE;switch(r){case"SinglePage":e=S.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=S.PAGE;case"TwoColumnLeft":t=M.ODD;break;case"TwoPageRight":e=S.PAGE;case"TwoColumnRight":t=M.EVEN;break}return{scrollMode:e,spreadMode:t}}const F={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function Dt(r){return r<11904}function Ft(r){return(r&65408)===0}function Ot(r){return r>=97&&r<=122||r>=65&&r<=90}function jt(r){return r>=48&&r<=57}function Vt(r){return r===32||r===9||r===13||r===10}function Bt(r){return r>=13312&&r<=40959||r>=63744&&r<=64255}function Ht(r){return r>=12448&&r<=12543}function Ut(r){return r>=12352&&r<=12447}function $t(r){return r>=65376&&r<=65439}function zt(r){return(r&65408)===3584}function ae(r){return Dt(r)?Ft(r)?Vt(r)?F.SPACE:Ot(r)||jt(r)||r===95?F.ALPHA_LETTER:F.PUNCT:zt(r)?F.THAI_LETTER:r===160?F.SPACE:F.ALPHA_LETTER:Bt(r)?F.HAN_LETTER:Ht(r)?F.KATAKANA_LETTER:Ut(r)?F.HIRAGANA_LETTER:$t(r)?F.HALFWIDTH_KATAKANA_LETTER:F.ALPHA_LETTER}let De;function Wt(){return De||=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦",De}const $={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},Gt=250,Kt=-50,Zt=-400,Fe={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},Oe=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let je;const Xt=/\p{M}+/gu,Qt=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,Jt=/([^\p{M}])\p{M}*$/u,Yt=/^\p{M}*([^\p{M}])/u,qt=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,Ve=new Map,ei="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",Be=new Map;let Ee=null,we=null;function _e(r){const e=[];let t;for(;(t=qt.exec(r))!==null;){let{index:y}=t;for(const b of t[0]){let v=Ve.get(b);v||(v=b.normalize("NFD").length,Ve.set(b,v)),e.push([v,y++])}}let i;if(e.length===0&&Ee)i=Ee;else if(e.length>0&&we)i=we;else{const y=Object.keys(Fe).join(""),b=Wt(),x=`([${y}])|([${b}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;e.length===0?i=Ee=new RegExp(x+"|(\\u0000)","gum"):i=we=new RegExp(x+`|(${ei})`,"gum")}const n=[];for(;(t=Xt.exec(r))!==null;)n.push([t[0].length,t.index]);let s=r.normalize("NFD");const a=[[0,0]];let o=0,l=0,h=0,u=0,f=0,p=!1;return s=s.replace(i,(y,b,v,C,x,L,w,E,I,m)=>{if(m-=u,b){const _=Fe[b],P=_.length;for(let c=1;c<P;c++)a.push([m-h+c,h-c]);return h-=P-1,_}if(v){let _=Be.get(v);_||(_=v.normalize("NFKC"),Be.set(v,_));const P=_.length;for(let c=1;c<P;c++)a.push([m-h+c,h-c]);return h-=P-1,_}if(C)return p=!0,m+f===n[o]?.[1]?++o:(a.push([m-1-h+1,h-1]),h-=1,u+=1),a.push([m-h+1,h]),u+=1,f+=1,C.charAt(0);if(x){const _=x.endsWith(`
`),P=_?x.length-2:x.length;p=!0;let c=P;m+f===n[o]?.[1]&&(c-=n[o][0],++o);for(let g=1;g<=c;g++)a.push([m-1-h+g,h-g]);return h-=c,u+=c,_?(m+=P-1,a.push([m-h+1,1+h]),h+=1,u+=1,f+=1,x.slice(0,P)):x}if(L){const _=L.length-2;return a.push([m-h+_,1+h]),h+=1,u+=1,f+=1,L.slice(0,-2)}if(w){const _=w.length-1;return a.push([m-h+_,h]),u+=1,f+=1,w.slice(0,-1)}if(E)return a.push([m-h+1,h-1]),h-=1,u+=1,f+=1," ";if(m+f===e[l]?.[1]){const _=e[l][0]-1;++l;for(let P=1;P<=_;P++)a.push([m-(h-P),h-P]);h-=_,u+=_}return I}),a.push([s.length,h]),[s,a,p]}function ti(r,e,t){if(!r)return[e,t];const i=e,n=e+t-1;let s=ie(r,u=>u[0]>=i);r[s][0]>i&&--s;let a=ie(r,u=>u[0]>=n,s);r[a][0]>n&&--a;const o=i+r[s][1],h=n+r[a][1]+1-o;return[o,h]}class ii{#e=null;#t=!0;#s=0;constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:i=!0}){this._linkService=e,this._eventBus=t,this.#t=i,this.onIsPageVisible=null,this.#i(),t._on("find",this.#n.bind(this)),t._on("findbarclose",this.#_.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#i(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#n(e){if(!e)return;const t=this._pdfDocument,{type:i}=e;(this.#e===null||this.#o(e))&&(this._dirtyMatch=!0),this.#e=e,i!=="highlightallchange"&&this.#w($.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this.#p();const n=!this._highlightMatches,s=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?this.#f():i==="again"?(this.#f(),n&&this.#e.highlightAll&&this.#c()):i==="highlightallchange"?(s?this.#f():this._highlightMatches=!0,this.#c()):this.#f():this._findTimeout=setTimeout(()=>{this.#f(),this._findTimeout=null},Gt)})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:i=-1,matchIndex:n=-1}){if(!this._scrollMatches||!e)return;if(n===-1||n!==this._selected.matchIdx)return;if(i===-1||i!==this._selected.pageIdx)return;this._scrollMatches=!1;const s={top:Kt,left:t+Zt};ht(e,s,!0)}#i(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#s=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#a(){const{query:e}=this.#e;return typeof e=="string"?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=_e(e)),this._normalizedQuery):(e||[]).filter(t=>!!t).map(t=>_e(t)[0])}#o(e){const t=e.query,i=this.#e.query,n=typeof t;if(n!==typeof i)return!0;if(n==="string"){if(t!==i)return!0}else if(JSON.stringify(t)!==JSON.stringify(i))return!0;switch(e.type){case"again":const a=this._selected.pageIdx+1,o=this._linkService;return a>=1&&a<=o.pagesCount&&a!==o.page&&!(this.onIsPageVisible?.(a)??!0);case"highlightallchange":return!1}return!0}#h(e,t,i){let n=e.slice(0,t).match(Jt);if(n){const s=e.charCodeAt(t),a=n[1].charCodeAt(0);if(ae(s)===ae(a))return!1}if(n=e.slice(t+i).match(Yt),n){const s=e.charCodeAt(t+i-1),a=n[1].charCodeAt(0);if(ae(s)===ae(a))return!1}return!0}#d(e,t,i,n){const s=this._pageMatches[i]=[],a=this._pageMatchesLength[i]=[];if(!e)return;const o=this._pageDiffs[i];let l;for(;(l=e.exec(n))!==null;){if(t&&!this.#h(n,l.index,l[0].length))continue;const[h,u]=ti(o,l.index,l[0].length);u&&(s.push(h),a.push(u))}}#r(e,t){const{matchDiacritics:i}=this.#e;let n=!1;e=e.replaceAll(Qt,(a,o,l,h,u,f)=>o?`[ ]*\\${o}[ ]*`:l?`[ ]*${l}[ ]*`:h?"[ ]+":i?u||f:u?Oe.has(u.charCodeAt(0))?u:"":t?(n=!0,`${f}\\p{M}*`):f);const s="[ ]*";return e.endsWith(s)&&(e=e.slice(0,e.length-s.length)),i&&t&&(je||=String.fromCharCode(...Oe),n=!0,e=`${e}(?=[${je}]|[^\\p{M}]|$)`),[n,e]}#l(e){let t=this.#a;if(t.length===0)return;const{caseSensitive:i,entireWord:n}=this.#e,s=this._pageContents[e],a=this._hasDiacritics[e];let o=!1;typeof t=="string"?[o,t]=this.#r(t,a):t=t.sort().reverse().map(u=>{const[f,p]=this.#r(u,a);return o||=f,`(${p})`}).join("|");const l=`g${o?"u":""}${i?"":"i"}`;t=t?new RegExp(t,l):null,this.#d(t,n,e,s),this.#e.highlightAll&&this.#u(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#E());const h=this._pageMatches[e].length;this._matchesCountTotal+=h,this.#t?h>0&&this.#P():++this.#s===this._linkService.pagesCount&&this.#P()}#p(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();const t={disableNormalization:!0};for(let i=0,n=this._linkService.pagesCount;i<n;i++){const{promise:s,resolve:a}=Promise.withResolvers();this._extractTextPromises[i]=s,e=e.then(()=>this._pdfDocument.getPage(i+1).then(o=>o.getTextContent(t)).then(o=>{const l=[];for(const h of o.items)l.push(h.str),h.hasEOL&&l.push(`
`);[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=_e(l.join("")),a()},o=>{console.error(`Unable to get text content for page ${i+1}`,o),this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,a()}))}}#u(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#c(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#f(){const e=this.#e.findPrevious,t=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#s=0,this._matchesCountTotal=0,this.#c();for(let a=0;a<i;a++)this._pendingFindMatches.has(a)||(this._pendingFindMatches.add(a),this._extractTextPromises[a].then(()=>{this._pendingFindMatches.delete(a),this.#l(a)}))}if(this.#a.length===0){this.#w($.FOUND);return}if(this._resumePageIdx)return;const s=this._offset;if(this._pagesToSearch=i,s.matchIdx!==null){const a=this._pageMatches[s.pageIdx].length;if(!e&&s.matchIdx+1<a||e&&s.matchIdx>0){s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,this.#m(!0);return}this.#b(e)}this.#E()}#g(e){const t=this._offset,i=e.length,n=this.#e.findPrevious;return i?(t.matchIdx=n?i-1:0,this.#m(!0),!0):(this.#b(n),t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0)?(this.#m(!1),!0):!1)}#E(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let e=null;do{const t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this.#g(e))}#b(e){const t=this._offset,i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=i||t.pageIdx<0)&&(t.pageIdx=e?i-1:0,t.wrapped=!0)}#m(e=!1){let t=$.NOT_FOUND;const i=this._offset.wrapped;if(this._offset.wrapped=!1,e){const n=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=i?$.WRAPPED:$.FOUND,n!==-1&&n!==this._selected.pageIdx&&this.#u(n)}this.#w(t,this.#e.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#u(this._selected.pageIdx))}#_(e){const t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#w($.FOUND),this._highlightMatches=!1,this.#c())})}#v(){const{pageIdx:e,matchIdx:t}=this._selected;let i=0,n=this._matchesCountTotal;if(t!==-1){for(let s=0;s<e;s++)i+=this._pageMatches[s]?.length||0;i+=t+1}return(i<1||i>n)&&(i=n=0),{current:i,total:n}}#P(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#v()})}#w(e,t=!1){!this.#t&&(this.#s!==this._linkService.pagesCount||e===$.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,entireWord:this.#e?.entireWord??null,matchesCount:this.#v(),rawQuery:this.#e?.query??null})}}const ni="noopener noreferrer nofollow",K={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class ge{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:n=!1}={}){this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=i,this._ignoreDestinationZoom=n,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return this.pdfDocument?this.pdfViewer.isInPresentationMode:!1}async goToDestination(e){if(!this.pdfDocument)return;let t,i,n;if(typeof e=="string"?(t=e,i=await this.pdfDocument.getDestination(e)):(t=null,i=await e),!Array.isArray(i)){console.error(`goToDestination: "${i}" is not a valid destination array, for dest="${e}".`);return}const[s]=i;if(s&&typeof s=="object"){if(n=this.pdfDocument.cachedPageNumber(s),!n)try{n=await this.pdfDocument.getPageIndex(s)+1}catch{console.error(`goToDestination: "${s}" is not a valid page reference, for dest="${e}".`);return}}else Number.isInteger(s)&&(n=s+1);if(!n||n<1||n>this.pagesCount){console.error(`goToDestination: "${n}" is not a valid page number, for dest="${e}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:t,explicitDest:i,pageNumber:n})),this.pdfViewer.scrollPageIntoView({pageNumber:n,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom})}goToPage(e){if(!this.pdfDocument)return;const t=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})}addLinkAttributes(e,t,i=!1){if(!t||typeof t!="string")throw new Error('A valid "url" parameter must provided.');const n=i?K.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let a="";switch(n){case K.NONE:break;case K.SELF:a="_self";break;case K.BLANK:a="_blank";break;case K.PARENT:a="_parent";break;case K.TOP:a="_top";break}e.target=a,e.rel=typeof s=="string"?s:ni}getDestinationHash(e){if(typeof e=="string"){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let t,i;if(e.includes("=")){const n=pe(e);if(n.has("search")){const s=n.get("search").replaceAll('"',""),a=n.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:a?s:s.match(/\S+/g)})}if(n.has("page")&&(t=n.get("page")|0||1),n.has("zoom")){const s=n.get("zoom").split(","),a=s[0],o=parseFloat(a);a.includes("Fit")?a==="Fit"||a==="FitB"?i=[null,{name:a}]:a==="FitH"||a==="FitBH"||a==="FitV"||a==="FitBV"?i=[null,{name:a},s.length>1?s[1]|0:null]:a==="FitR"?s.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:a},s[1]|0,s[2]|0,s[3]|0,s[4]|0]:console.error(`PDFLinkService.setHash: "${a}" is not a valid zoom value.`):i=[null,{name:"XYZ"},s.length>1?s[1]|0:null,s.length>2?s[2]|0:null,o?o/100:a]}i?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:i,allowNegativeOffset:!0}):t&&(this.page=t),n.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:n.get("pagemode")}),n.has("nameddest")&&this.goToDestination(n.get("nameddest"));return}i=unescape(e);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}if(typeof i=="string"||ge.#e(i)){this.goToDestination(i);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:e})}}async executeSetOCGState(e){if(!this.pdfDocument)return;const t=this.pdfDocument,i=await this.pdfViewer.optionalContentConfigPromise;t===this.pdfDocument&&(i.setOCGState(e),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i))}static#e(e){if(!Array.isArray(e)||e.length<2)return!1;const[t,i,...n]=e;if(!(typeof t=="object"&&Number.isInteger(t?.num)&&Number.isInteger(t?.gen))&&!Number.isInteger(t)||!(typeof i=="object"&&typeof i?.name=="string"))return!1;let s=!0;switch(i.name){case"XYZ":if(n.length!==3)return!1;break;case"Fit":case"FitB":return n.length===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(n.length!==1)return!1;break;case"FitR":if(n.length!==4)return!1;s=!1;break;default:return!1}for(const a of n)if(!(typeof a=="number"||s&&a===null))return!1;return!0}}class Ae extends ge{setDocument(e,t=null){}}const{AbortException:si,AnnotationEditorLayer:ri,AnnotationEditorParamsType:Rn,AnnotationEditorType:W,AnnotationEditorUIManager:ai,AnnotationLayer:oi,AnnotationMode:B,build:Nn,CMapCompressionType:Mn,ColorPicker:kn,createValidAbsoluteUrl:li,DOMSVGFactory:Dn,DrawLayer:hi,FeatureTest:Fn,fetchData:He,getDocument:On,getFilenameFromUrl:jn,getPdfFilenameFromUrl:ui,getXfaPageViewport:Vn,GlobalWorkerOptions:Bn,ImageKind:Hn,InvalidPDFException:Un,isDataScheme:$n,isPdfFile:ci,MissingPDFException:zn,noContextMenu:Wn,normalizeUnicode:di,OPS:Gn,Outliner:Kn,PasswordResponses:Zn,PDFDataRangeTransport:Xn,PDFDateString:Qn,PDFWorker:Jn,PermissionFlag:oe,PixelsPerInch:V,RenderingCancelledException:Se,renderTextLayer:Yn,setLayerDimensions:fi,shadow:ce,TextLayer:pi,UnexpectedResponseException:qn,updateTextLayer:es,Util:ts,VerbosityLevel:is,version:Ue,XfaLayer:ye}=globalThis.pdfjsLib;class ct{#e=null;#t=null;constructor({pdfPage:e,linkService:t,downloadManager:i,annotationStorage:n=null,imageResourcesPath:s="",renderForms:a=!0,enableScripting:o=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:h=null,annotationCanvasMap:u=null,accessibilityManager:f=null,annotationEditorUIManager:p=null,onAppend:y=null}){this.pdfPage=e,this.linkService=t,this.downloadManager=i,this.imageResourcesPath=s,this.renderForms=a,this.annotationStorage=n,this.enableScripting=o,this._hasJSActionsPromise=l||Promise.resolve(!1),this._fieldObjectsPromise=h||Promise.resolve(null),this._annotationCanvasMap=u,this._accessibilityManager=f,this._annotationEditorUIManager=p,this.#e=y,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=t.eventBus}async render(e,t="display"){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:e.clone({dontFlip:!0})});return}const[i,n,s]=await Promise.all([this.pdfPage.getAnnotations({intent:t}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const a=this.div=document.createElement("div");if(a.className="annotationLayer",this.#e?.(a),i.length===0){this.hide();return}this.annotationLayer=new oi({div:a,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:e.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:i,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:n,fieldObjects:s}),this.linkService.isInPresentationMode&&this.#s(X.FULLSCREEN),this.#t||(this.#t=new AbortController,this._eventBus?._on("presentationmodechanged",o=>{this.#s(o.state)},{signal:this.#t.signal}))}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}#s(e){if(!this.div)return;let t=!1;switch(e){case X.FULLSCREEN:t=!0;break;case X.NORMAL:break;default:return}for(const i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=t)}}function $e(r,e){const t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=r,t.target="_parent","download"in t&&(t.download=e),(document.body||document.documentElement).append(t),t.click(),t.remove()}class gi{#e=new WeakMap;downloadData(e,t,i){const n=URL.createObjectURL(new Blob([e],{type:i}));$e(n,t)}openOrDownloadData(e,t,i=null){const s=ci(t)?"application/pdf":"";return this.downloadData(e,t,s),!1}download(e,t,i,n){let s;if(e)s=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!li(t,"http://example.com")){console.error(`download - not a valid URL: ${t}`);return}s=t+"#pdfjs.action=download"}$e(s,i)}}const ze={EVENT:"event",TIMEOUT:"timeout"};async function mi({target:r,name:e,delay:t=0}){if(typeof r!="object"||!(e&&typeof e=="string")||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:i,resolve:n}=Promise.withResolvers(),s=new AbortController;function a(h){s.abort(),clearTimeout(l),n(h)}const o=r instanceof dt?"_on":"addEventListener";r[o](e,a.bind(null,ze.EVENT),{signal:s.signal});const l=setTimeout(a.bind(null,ze.TIMEOUT),t);return i}class dt{#e=Object.create(null);on(e,t,i=null){this._on(e,t,{external:!0,once:i?.once,signal:i?.signal})}off(e,t,i=null){this._off(e,t)}dispatch(e,t){const i=this.#e[e];if(!i||i.length===0)return;let n;for(const{listener:s,external:a,once:o}of i.slice(0)){if(o&&this._off(e,s),a){(n||=[]).push(s);continue}s(t)}if(n){for(const s of n)s(t);n=null}}_on(e,t,i=null){let n=null;if(i?.signal instanceof AbortSignal){const{signal:a}=i;if(a.aborted){console.error("Cannot use an `aborted` signal.");return}const o=()=>this._off(e,t);n=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}(this.#e[e]||=[]).push({listener:t,external:i?.external===!0,once:i?.once===!0,rmAbort:n})}_off(e,t,i=null){const n=this.#e[e];if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s];if(o.listener===t){o.rmAbort?.(),n.splice(s,1);return}}}}class me{constructor(e){this.value=e}valueOf(){return this.value}}class N extends me{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class U extends me{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}}class ee extends me{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}}const We=100,bi="⁨",Ei="⁩";function wi(r,e,t){if(t===e||t instanceof U&&e instanceof U&&t.value===e.value)return!0;if(e instanceof U&&typeof t=="string"){let i=r.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value);if(t===i)return!0}return!1}function Ge(r,e,t){return e[t]?J(r,e[t].value):(r.reportError(new RangeError("No default")),new N)}function Le(r,e){const t=[],i=Object.create(null);for(const n of e)n.type==="narg"?i[n.name]=ne(r,n.value):t.push(ne(r,n));return{positional:t,named:i}}function ne(r,e){switch(e.type){case"str":return e.value;case"num":return new U(e.value,{minimumFractionDigits:e.precision});case"var":return _i(r,e);case"mesg":return yi(r,e);case"term":return vi(r,e);case"func":return Pi(r,e);case"select":return xi(r,e);default:return new N}}function _i(r,{name:e}){let t;if(r.params)if(Object.prototype.hasOwnProperty.call(r.params,e))t=r.params[e];else return new N(`$${e}`);else if(r.args&&Object.prototype.hasOwnProperty.call(r.args,e))t=r.args[e];else return r.reportError(new ReferenceError(`Unknown variable: $${e}`)),new N(`$${e}`);if(t instanceof me)return t;switch(typeof t){case"string":return t;case"number":return new U(t);case"object":if(t instanceof Date)return new ee(t.getTime());default:return r.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new N(`$${e}`)}}function yi(r,{name:e,attr:t}){const i=r.bundle._messages.get(e);if(!i)return r.reportError(new ReferenceError(`Unknown message: ${e}`)),new N(e);if(t){const n=i.attributes[t];return n?J(r,n):(r.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new N(`${e}.${t}`))}return i.value?J(r,i.value):(r.reportError(new ReferenceError(`No value: ${e}`)),new N(e))}function vi(r,{name:e,attr:t,args:i}){const n=`-${e}`,s=r.bundle._terms.get(n);if(!s)return r.reportError(new ReferenceError(`Unknown term: ${n}`)),new N(n);if(t){const o=s.attributes[t];if(o){r.params=Le(r,i).named;const l=J(r,o);return r.params=null,l}return r.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new N(`${n}.${t}`)}r.params=Le(r,i).named;const a=J(r,s.value);return r.params=null,a}function Pi(r,{name:e,args:t}){let i=r.bundle._functions[e];if(!i)return r.reportError(new ReferenceError(`Unknown function: ${e}()`)),new N(`${e}()`);if(typeof i!="function")return r.reportError(new TypeError(`Function ${e}() is not callable`)),new N(`${e}()`);try{let n=Le(r,t);return i(n.positional,n.named)}catch(n){return r.reportError(n),new N(`${e}()`)}}function xi(r,{selector:e,variants:t,star:i}){let n=ne(r,e);if(n instanceof N)return Ge(r,t,i);for(const s of t){const a=ne(r,s.key);if(wi(r,n,a))return J(r,s.value)}return Ge(r,t,i)}function ft(r,e){if(r.dirty.has(e))return r.reportError(new RangeError("Cyclic reference")),new N;r.dirty.add(e);const t=[],i=r.bundle._useIsolating&&e.length>1;for(const n of e){if(typeof n=="string"){t.push(r.bundle._transform(n));continue}if(r.placeables++,r.placeables>We)throw r.dirty.delete(e),new RangeError(`Too many placeables expanded: ${r.placeables}, max allowed is ${We}`);i&&t.push(bi),t.push(ne(r,n).toString(r)),i&&t.push(Ei)}return r.dirty.delete(e),t.join("")}function J(r,e){return typeof e=="string"?r.bundle._transform(e):ft(r,e)}class Si{constructor(e,t,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=i}reportError(e){if(!this.errors||!(e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let i=this.bundle._intls.get(e);i||(i={},this.bundle._intls.set(e,i));let n=JSON.stringify(t);return i[n]||(i[n]=new e(this.bundle.locales,t)),i[n]}}function de(r,e){const t=Object.create(null);for(const[i,n]of Object.entries(r))e.includes(i)&&(t[i]=n.valueOf());return t}const Ke=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Li(r,e){let t=r[0];if(t instanceof N)return new N(`NUMBER(${t.valueOf()})`);if(t instanceof U)return new U(t.valueOf(),{...t.opts,...de(e,Ke)});if(t instanceof ee)return new U(t.valueOf(),{...de(e,Ke)});throw new TypeError("Invalid argument to NUMBER")}const Ze=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function Ii(r,e){let t=r[0];if(t instanceof N)return new N(`DATETIME(${t.valueOf()})`);if(t instanceof ee)return new ee(t.valueOf(),{...t.opts,...de(e,Ze)});if(t instanceof U)return new ee(t.valueOf(),{...de(e,Ze)});throw new TypeError("Invalid argument to DATETIME")}const Xe=new Map;function Ai(r){const e=Array.isArray(r)?r.join(" "):r;let t=Xe.get(e);return t===void 0&&(t=new Map,Xe.set(e,t)),t}class Ti{constructor(e,{functions:t,useIsolating:i=!0,transform:n=s=>s}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:Li,DATETIME:Ii,...t},this._useIsolating=i,this._transform=n,this._intls=Ai(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){const i=[];for(let n=0;n<e.body.length;n++){let s=e.body[n];if(s.id.startsWith("-")){if(t===!1&&this._terms.has(s.id)){i.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(t===!1&&this._messages.has(s.id)){i.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return i}formatPattern(e,t=null,i=null){if(typeof e=="string")return this._transform(e);let n=new Si(this,i,t);try{return ft(n,e).toString(n)}catch(s){if(n.errors&&s instanceof Error)return n.errors.push(s),new N().toString(n);throw s}}}const ve=/^(-?[a-zA-Z][\w-]*) *= */gm,Qe=/\.([a-zA-Z][\w-]*) *= */y,Ci=/\*?\[/y,Pe=/(-?[0-9]+(?:\.([0-9]+))?)/y,Ri=/([a-zA-Z][\w-]*)/y,Je=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,Ni=/^[A-Z][A-Z0-9_-]*$/,le=/([^{}\n\r]+)/y,Mi=/([^\\"\n\r]*)/y,Ye=/\\([\\"])/y,qe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,ki=/^\n+/,et=/ +$/,Di=/ *\r?\n/g,Fi=/( *)$/,Oi=/{\s*/y,tt=/\s*}/y,ji=/\[\s*/y,Vi=/\s*] */y,Bi=/\s*\(\s*/y,Hi=/\s*->\s*/y,Ui=/\s*:\s*/y,$i=/\s*,?\s*/y,zi=/\s+/y;class Wi{constructor(e){this.body=[],ve.lastIndex=0;let t=0;for(;;){let c=ve.exec(e);if(c===null)break;t=ve.lastIndex;try{this.body.push(l(c[1]))}catch(g){if(g instanceof SyntaxError)continue;throw g}}function i(c){return c.lastIndex=t,c.test(e)}function n(c,g){if(e[t]===c)return t++,!0;if(g)throw new g(`Expected ${c}`);return!1}function s(c,g){if(i(c))return t=c.lastIndex,!0;if(g)throw new g(`Expected ${c.toString()}`);return!1}function a(c){c.lastIndex=t;let g=c.exec(e);if(g===null)throw new SyntaxError(`Expected ${c.toString()}`);return t=c.lastIndex,g}function o(c){return a(c)[1]}function l(c){let g=u(),A=h();if(g===null&&Object.keys(A).length===0)throw new SyntaxError("Expected message value or attributes");return{id:c,value:g,attributes:A}}function h(){let c=Object.create(null);for(;i(Qe);){let g=o(Qe),A=u();if(A===null)throw new SyntaxError("Expected attribute value");c[g]=A}return c}function u(){let c;if(i(le)&&(c=o(le)),e[t]==="{"||e[t]==="}")return f(c?[c]:[],1/0);let g=m();return g?c?f([c,g],g.length):(g.value=_(g.value,ki),f([g],g.length)):c?_(c,et):null}function f(c=[],g){for(;;){if(i(le)){c.push(o(le));continue}if(e[t]==="{"){c.push(p());continue}if(e[t]==="}")throw new SyntaxError("Unbalanced closing brace");let k=m();if(k){c.push(k),g=Math.min(g,k.length);continue}break}let A=c.length-1,D=c[A];typeof D=="string"&&(c[A]=_(D,et));let j=[];for(let k of c)k instanceof it&&(k=k.value.slice(0,k.value.length-g)),k&&j.push(k);return j}function p(){s(Oi,SyntaxError);let c=y();if(s(tt))return c;if(s(Hi)){let g=C();return s(tt,SyntaxError),{type:"select",selector:c,...g}}throw new SyntaxError("Unclosed placeable")}function y(){if(e[t]==="{")return p();if(i(Je)){let[,c,g,A=null]=a(Je);if(c==="$")return{type:"var",name:g};if(s(Bi)){let D=b();if(c==="-")return{type:"term",name:g,attr:A,args:D};if(Ni.test(g))return{type:"func",name:g,args:D};throw new SyntaxError("Function names must be all upper-case")}return c==="-"?{type:"term",name:g,attr:A,args:[]}:{type:"mesg",name:g,attr:A}}return L()}function b(){let c=[];for(;;){switch(e[t]){case")":return t++,c;case void 0:throw new SyntaxError("Unclosed argument list")}c.push(v()),s($i)}}function v(){let c=y();return c.type!=="mesg"?c:s(Ui)?{type:"narg",name:c.name,value:L()}:c}function C(){let c=[],g=0,A;for(;i(Ci);){n("*")&&(A=g);let D=x(),j=u();if(j===null)throw new SyntaxError("Expected variant value");c[g++]={key:D,value:j}}if(g===0)return null;if(A===void 0)throw new SyntaxError("Expected default variant");return{variants:c,star:A}}function x(){s(ji,SyntaxError);let c;return i(Pe)?c=w():c={type:"str",value:o(Ri)},s(Vi,SyntaxError),c}function L(){if(i(Pe))return w();if(e[t]==='"')return E();throw new SyntaxError("Invalid expression")}function w(){let[,c,g=""]=a(Pe),A=g.length;return{type:"num",value:parseFloat(c),precision:A}}function E(){n('"',SyntaxError);let c="";for(;;){if(c+=o(Mi),e[t]==="\\"){c+=I();continue}if(n('"'))return{type:"str",value:c};throw new SyntaxError("Unclosed string literal")}}function I(){if(i(Ye))return o(Ye);if(i(qe)){let[,c,g]=a(qe),A=parseInt(c||g,16);return A<=55295||57344<=A?String.fromCodePoint(A):"�"}throw new SyntaxError("Unknown escape sequence")}function m(){let c=t;switch(s(zi),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return P(e.slice(c,t))}return e[t-1]===" "?P(e.slice(c,t)):!1}function _(c,g){return c.replace(g,"")}function P(c){let g=c.replace(Di,`
`),A=Fi.exec(c)[1].length;return new it(g,A)}}}class it{constructor(e,t){this.value=e,this.length=t}}const Gi=/<|&#?\w+;/,Ki={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},Zi={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function Xi(r,e){const{value:t}=e;if(typeof t=="string")if(r.localName==="title"&&r.namespaceURI==="http://www.w3.org/1999/xhtml")r.textContent=t;else if(!Gi.test(t))r.textContent=t;else{const i=r.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=t,Qi(i.content,r)}pt(e,r)}function Qi(r,e){for(const t of r.childNodes)if(t.nodeType!==t.TEXT_NODE){if(t.hasAttribute("data-l10n-name")){const i=Yi(e,t);r.replaceChild(i,t);continue}if(en(t)){const i=qi(t);r.replaceChild(i,t);continue}console.warn(`An element of forbidden type "${t.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),r.replaceChild(Ie(t),t)}e.textContent="",e.appendChild(r)}function Ji(r,e){if(!r)return!1;for(let t of r)if(t.name===e)return!0;return!1}function pt(r,e){const t=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(i=>i.trim()):null;for(const i of Array.from(e.attributes))nt(i.name,e,t)&&!Ji(r.attributes,i.name)&&e.removeAttribute(i.name);if(r.attributes)for(const i of Array.from(r.attributes))nt(i.name,e,t)&&e.getAttribute(i.name)!==i.value&&e.setAttribute(i.name,i.value)}function Yi(r,e){const t=e.getAttribute("data-l10n-name"),i=r.querySelector(`[data-l10n-name="${t}"]`);if(!i)return console.warn(`An element named "${t}" wasn't found in the source.`),Ie(e);if(i.localName!==e.localName)return console.warn(`An element named "${t}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${i.localName}).`),Ie(e);r.removeChild(i);const n=i.cloneNode(!1);return gt(e,n)}function qi(r){const e=r.ownerDocument.createElement(r.localName);return gt(r,e)}function Ie(r){return r.ownerDocument.createTextNode(r.textContent)}function en(r){const e=Ki[r.namespaceURI];return e&&e.includes(r.localName)}function nt(r,e,t=null){if(t&&t.includes(r))return!0;const i=Zi[e.namespaceURI];if(!i)return!1;const n=r.toLowerCase(),s=e.localName;if(i.global.includes(n))return!0;if(!i[s])return!1;if(i[s].includes(n))return!0;if(e.namespaceURI==="http://www.w3.org/1999/xhtml"&&s==="input"&&n==="value"){const a=e.type.toLowerCase();if(a==="submit"||a==="button"||a==="reset")return!0}return!1}function gt(r,e){return e.textContent=r.textContent,pt(r,e),e}class tn extends Array{static from(e){return e instanceof this?e:new this(e)}}class nn extends tn{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else if(Symbol.iterator in Object(e))this.iterator=e[Symbol.iterator]();else throw new TypeError("Argument must implement the iteration protocol.")}[Symbol.asyncIterator](){const e=this;let t=0;return{async next(){return e.length<=t&&e.push(e.iterator.next()),e[t++]}}}async touchNext(e=1){let t=0;for(;t++<e;){const i=this[this.length-1];if(i&&(await i).done)break;this.push(this.iterator.next())}return this[this.length-1]}}class sn{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}async formatWithFallback(e,t){const i=[];let n=!1;for await(const s of this.bundles){n=!0;const a=on(t,s,e,i);if(a.size===0)break;if(typeof console<"u"){const o=s.locales[0],l=Array.from(a).join(", ");console.warn(`[fluent] Missing translations in ${o}: ${l}`)}}return!n&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.
  keys: ${JSON.stringify(e)}.
  resourceIds: ${JSON.stringify(this.resourceIds)}.`),i}formatMessages(e){return this.formatWithFallback(e,an)}formatValues(e){return this.formatWithFallback(e,rn)}async formatValue(e,t){const[i]=await this.formatValues([{id:e,args:t}]);return i}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=nn.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}function rn(r,e,t,i){return t.value?r.formatPattern(t.value,i,e):null}function an(r,e,t,i){const n={value:null,attributes:null};t.value&&(n.value=r.formatPattern(t.value,i,e));let s=Object.keys(t.attributes);if(s.length>0){n.attributes=new Array(s.length);for(let[a,o]of s.entries()){let l=r.formatPattern(t.attributes[o],i,e);n.attributes[a]={name:o,value:l}}}return n}function on(r,e,t,i){const n=[],s=new Set;return t.forEach(({id:a,args:o},l)=>{if(i[l]!==void 0)return;let h=e.getMessage(a);if(h){if(n.length=0,i[l]=r(e,n,h,o),n.length>0&&typeof console<"u"){const u=e.locales[0],f=n.join(", ");console.warn(`[fluent][resolver] errors in ${u}/${a}: ${f}.`)}}else s.add(a)}),s}const Z="data-l10n-id",Y="data-l10n-args",ln=`[${Z}]`;class hn extends sn{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Z,Y]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,i){return e.setAttribute(Z,t),i?e.setAttribute(Y,JSON.stringify(i)):e.removeAttribute(Y),e}getAttributes(e){return{id:e.getAttribute(Z),args:JSON.parse(e.getAttribute(Y)||null)}}connectRoot(e){for(const t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error(`Cannot connect a root:
          DOMLocalization already has a root from a different window.`)}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),this.roots.size===0?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const e=Array.from(this.roots);return Promise.all(e.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(const t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(const i of t.addedNodes)if(i.nodeType===i.ELEMENT_NODE)if(i.childElementCount)for(const n of this.getTranslatables(i))this.pendingElements.add(n);else i.hasAttribute(Z)&&this.pendingElements.add(i);break}this.pendingElements.size>0&&this.pendingrAF===null&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}async translateElements(e){if(!e.length)return;const t=e.map(this.getKeysForElement),i=await this.formatMessages(t);return this.applyTranslations(e,i)}applyTranslations(e,t){this.pauseObserving();for(let i=0;i<e.length;i++)t[i]!==void 0&&Xi(e[i],t[i]);this.resumeObserving()}getTranslatables(e){const t=Array.from(e.querySelectorAll(ln));return typeof e.hasAttribute=="function"&&e.hasAttribute(Z)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute(Z),args:JSON.parse(e.getAttribute(Y)||null)}}}class fe{#e;#t=new Set;#s;#n;constructor({lang:e,isRTL:t},i=null){this.#s=fe.#i(e),this.#n=i,this.#e=t??fe.#a(this.#s)?"rtl":"ltr"}_setL10n(e){this.#n=e}getLanguage(){return this.#s}getDirection(){return this.#e}async get(e,t=null,i){return Array.isArray(e)?(e=e.map(a=>({id:a})),(await this.#n.formatMessages(e)).map(a=>a.value)):(await this.#n.formatMessages([{id:e,args:t}]))?.[0].value||i}async translate(e){this.#t.add(e);try{this.#n.connectRoot(e),await this.#n.translateRoots()}catch{}}async destroy(){for(const e of this.#t)this.#n.disconnectRoot(e);this.#t.clear(),this.#n.pauseObserving()}pause(){this.#n.pauseObserving()}resume(){this.#n.resumeObserving()}static#i(e){return e=e?.toLowerCase()||"en-us",{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e]||e}static#a(e){const t=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(t)}}function st(r,e){const t=new Wi(e),i=new Ti(r),n=i.addResource(t);return n.length&&console.error("L10n errors",n),i}class H extends fe{constructor(e){super({lang:e});const t=e?H.#e.bind(H,"en-us",this.getLanguage()):H.#n.bind(H,this.getLanguage());this._setL10n(new hn([],t))}static async*#e(e,t){const{baseURL:i,paths:n}=await this.#s(),s=[t];if(e!==t){const a=t.split("-",1)[0];a!==t&&s.push(a),s.push(e)}for(const a of s){const o=await this.#t(a,i,n);o?yield o:a==="en-us"&&(yield this.#i(a))}}static async#t(e,t,i){const n=i[e];if(!n)return null;const s=new URL(n,t),a=await He(s,"text");return st(e,a)}static async#s(){try{const{href:e}=document.querySelector('link[type="application/l10n"]'),t=await He(e,"json");return{baseURL:e.replace(/[^/]*$/,"")||"./",paths:t}}catch{}return{baseURL:"./",paths:Object.create(null)}}static async*#n(e){yield this.#i(e)}static async#i(e){return st(e,`pdfjs-previous-button =
    .title = Previous Page
pdfjs-previous-button-label = Previous
pdfjs-next-button =
    .title = Next Page
pdfjs-next-button-label = Next
pdfjs-page-input =
    .title = Page
pdfjs-of-pages = of { $pagesCount }
pdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })
pdfjs-zoom-out-button =
    .title = Zoom Out
pdfjs-zoom-out-button-label = Zoom Out
pdfjs-zoom-in-button =
    .title = Zoom In
pdfjs-zoom-in-button-label = Zoom In
pdfjs-zoom-select =
    .title = Zoom
pdfjs-presentation-mode-button =
    .title = Switch to Presentation Mode
pdfjs-presentation-mode-button-label = Presentation Mode
pdfjs-open-file-button =
    .title = Open File
pdfjs-open-file-button-label = Open
pdfjs-print-button =
    .title = Print
pdfjs-print-button-label = Print
pdfjs-save-button =
    .title = Save
pdfjs-save-button-label = Save
pdfjs-download-button =
    .title = Download
pdfjs-download-button-label = Download
pdfjs-bookmark-button =
    .title = Current Page (View URL from Current Page)
pdfjs-bookmark-button-label = Current Page
pdfjs-tools-button =
    .title = Tools
pdfjs-tools-button-label = Tools
pdfjs-first-page-button =
    .title = Go to First Page
pdfjs-first-page-button-label = Go to First Page
pdfjs-last-page-button =
    .title = Go to Last Page
pdfjs-last-page-button-label = Go to Last Page
pdfjs-page-rotate-cw-button =
    .title = Rotate Clockwise
pdfjs-page-rotate-cw-button-label = Rotate Clockwise
pdfjs-page-rotate-ccw-button =
    .title = Rotate Counterclockwise
pdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise
pdfjs-cursor-text-select-tool-button =
    .title = Enable Text Selection Tool
pdfjs-cursor-text-select-tool-button-label = Text Selection Tool
pdfjs-cursor-hand-tool-button =
    .title = Enable Hand Tool
pdfjs-cursor-hand-tool-button-label = Hand Tool
pdfjs-scroll-page-button =
    .title = Use Page Scrolling
pdfjs-scroll-page-button-label = Page Scrolling
pdfjs-scroll-vertical-button =
    .title = Use Vertical Scrolling
pdfjs-scroll-vertical-button-label = Vertical Scrolling
pdfjs-scroll-horizontal-button =
    .title = Use Horizontal Scrolling
pdfjs-scroll-horizontal-button-label = Horizontal Scrolling
pdfjs-scroll-wrapped-button =
    .title = Use Wrapped Scrolling
pdfjs-scroll-wrapped-button-label = Wrapped Scrolling
pdfjs-spread-none-button =
    .title = Do not join page spreads
pdfjs-spread-none-button-label = No Spreads
pdfjs-spread-odd-button =
    .title = Join page spreads starting with odd-numbered pages
pdfjs-spread-odd-button-label = Odd Spreads
pdfjs-spread-even-button =
    .title = Join page spreads starting with even-numbered pages
pdfjs-spread-even-button-label = Even Spreads
pdfjs-document-properties-button =
    .title = Document Properties…
pdfjs-document-properties-button-label = Document Properties…
pdfjs-document-properties-file-name = File name:
pdfjs-document-properties-file-size = File size:
pdfjs-document-properties-kb = { $size_kb } KB ({ $size_b } bytes)
pdfjs-document-properties-mb = { $size_mb } MB ({ $size_b } bytes)
pdfjs-document-properties-title = Title:
pdfjs-document-properties-author = Author:
pdfjs-document-properties-subject = Subject:
pdfjs-document-properties-keywords = Keywords:
pdfjs-document-properties-creation-date = Creation Date:
pdfjs-document-properties-modification-date = Modification Date:
pdfjs-document-properties-date-string = { $date }, { $time }
pdfjs-document-properties-creator = Creator:
pdfjs-document-properties-producer = PDF Producer:
pdfjs-document-properties-version = PDF Version:
pdfjs-document-properties-page-count = Page Count:
pdfjs-document-properties-page-size = Page Size:
pdfjs-document-properties-page-size-unit-inches = in
pdfjs-document-properties-page-size-unit-millimeters = mm
pdfjs-document-properties-page-size-orientation-portrait = portrait
pdfjs-document-properties-page-size-orientation-landscape = landscape
pdfjs-document-properties-page-size-name-a-three = A3
pdfjs-document-properties-page-size-name-a-four = A4
pdfjs-document-properties-page-size-name-letter = Letter
pdfjs-document-properties-page-size-name-legal = Legal
pdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })
pdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })
pdfjs-document-properties-linearized = Fast Web View:
pdfjs-document-properties-linearized-yes = Yes
pdfjs-document-properties-linearized-no = No
pdfjs-document-properties-close-button = Close
pdfjs-print-progress-message = Preparing document for printing…
pdfjs-print-progress-percent = { $progress }%
pdfjs-print-progress-close-button = Cancel
pdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.
pdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.
pdfjs-toggle-sidebar-button =
    .title = Toggle Sidebar
pdfjs-toggle-sidebar-notification-button =
    .title = Toggle Sidebar (document contains outline/attachments/layers)
pdfjs-toggle-sidebar-button-label = Toggle Sidebar
pdfjs-document-outline-button =
    .title = Show Document Outline (double-click to expand/collapse all items)
pdfjs-document-outline-button-label = Document Outline
pdfjs-attachments-button =
    .title = Show Attachments
pdfjs-attachments-button-label = Attachments
pdfjs-layers-button =
    .title = Show Layers (double-click to reset all layers to the default state)
pdfjs-layers-button-label = Layers
pdfjs-thumbs-button =
    .title = Show Thumbnails
pdfjs-thumbs-button-label = Thumbnails
pdfjs-current-outline-item-button =
    .title = Find Current Outline Item
pdfjs-current-outline-item-button-label = Current Outline Item
pdfjs-findbar-button =
    .title = Find in Document
pdfjs-findbar-button-label = Find
pdfjs-additional-layers = Additional Layers
pdfjs-thumb-page-title =
    .title = Page { $page }
pdfjs-thumb-page-canvas =
    .aria-label = Thumbnail of Page { $page }
pdfjs-find-input =
    .title = Find
    .placeholder = Find in document…
pdfjs-find-previous-button =
    .title = Find the previous occurrence of the phrase
pdfjs-find-previous-button-label = Previous
pdfjs-find-next-button =
    .title = Find the next occurrence of the phrase
pdfjs-find-next-button-label = Next
pdfjs-find-highlight-checkbox = Highlight All
pdfjs-find-match-case-checkbox-label = Match Case
pdfjs-find-match-diacritics-checkbox-label = Match Diacritics
pdfjs-find-entire-word-checkbox-label = Whole Words
pdfjs-find-reached-top = Reached top of document, continued from bottom
pdfjs-find-reached-bottom = Reached end of document, continued from top
pdfjs-find-match-count =
    { $total ->
        [one] { $current } of { $total } match
       *[other] { $current } of { $total } matches
    }
pdfjs-find-match-count-limit =
    { $limit ->
        [one] More than { $limit } match
       *[other] More than { $limit } matches
    }
pdfjs-find-not-found = Phrase not found
pdfjs-page-scale-width = Page Width
pdfjs-page-scale-fit = Page Fit
pdfjs-page-scale-auto = Automatic Zoom
pdfjs-page-scale-actual = Actual Size
pdfjs-page-scale-percent = { $scale }%
pdfjs-page-landmark =
    .aria-label = Page { $page }
pdfjs-loading-error = An error occurred while loading the PDF.
pdfjs-invalid-file-error = Invalid or corrupted PDF file.
pdfjs-missing-file-error = Missing PDF file.
pdfjs-unexpected-response-error = Unexpected server response.
pdfjs-rendering-error = An error occurred while rendering the page.
pdfjs-annotation-date-string = { $date }, { $time }
pdfjs-text-annotation-type =
    .alt = [{ $type } Annotation]
pdfjs-password-label = Enter the password to open this PDF file.
pdfjs-password-invalid = Invalid password. Please try again.
pdfjs-password-ok-button = OK
pdfjs-password-cancel-button = Cancel
pdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.
pdfjs-editor-free-text-button =
    .title = Text
pdfjs-editor-free-text-button-label = Text
pdfjs-editor-ink-button =
    .title = Draw
pdfjs-editor-ink-button-label = Draw
pdfjs-editor-stamp-button =
    .title = Add or edit images
pdfjs-editor-stamp-button-label = Add or edit images
pdfjs-editor-highlight-button =
    .title = Highlight
pdfjs-editor-highlight-button-label = Highlight
pdfjs-highlight-floating-button1 =
    .title = Highlight
    .aria-label = Highlight
pdfjs-highlight-floating-button-label = Highlight
pdfjs-editor-remove-ink-button =
    .title = Remove drawing
pdfjs-editor-remove-freetext-button =
    .title = Remove text
pdfjs-editor-remove-stamp-button =
    .title = Remove image
pdfjs-editor-remove-highlight-button =
    .title = Remove highlight
pdfjs-editor-free-text-color-input = Color
pdfjs-editor-free-text-size-input = Size
pdfjs-editor-ink-color-input = Color
pdfjs-editor-ink-thickness-input = Thickness
pdfjs-editor-ink-opacity-input = Opacity
pdfjs-editor-stamp-add-image-button =
    .title = Add image
pdfjs-editor-stamp-add-image-button-label = Add image
pdfjs-editor-free-highlight-thickness-input = Thickness
pdfjs-editor-free-highlight-thickness-title =
    .title = Change thickness when highlighting items other than text
pdfjs-free-text =
    .aria-label = Text Editor
pdfjs-free-text-default-content = Start typing…
pdfjs-ink =
    .aria-label = Draw Editor
pdfjs-ink-canvas =
    .aria-label = User-created image
pdfjs-editor-alt-text-button-label = Alt text
pdfjs-editor-alt-text-edit-button-label = Edit alt text
pdfjs-editor-alt-text-dialog-label = Choose an option
pdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.
pdfjs-editor-alt-text-add-description-label = Add a description
pdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.
pdfjs-editor-alt-text-mark-decorative-label = Mark as decorative
pdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.
pdfjs-editor-alt-text-cancel-button = Cancel
pdfjs-editor-alt-text-save-button = Save
pdfjs-editor-alt-text-decorative-tooltip = Marked as decorative
pdfjs-editor-alt-text-textarea =
    .placeholder = For example, “A young man sits down at a table to eat a meal”
pdfjs-editor-resizer-label-top-left = Top left corner — resize
pdfjs-editor-resizer-label-top-middle = Top middle — resize
pdfjs-editor-resizer-label-top-right = Top right corner — resize
pdfjs-editor-resizer-label-middle-right = Middle right — resize
pdfjs-editor-resizer-label-bottom-right = Bottom right corner — resize
pdfjs-editor-resizer-label-bottom-middle = Bottom middle — resize
pdfjs-editor-resizer-label-bottom-left = Bottom left corner — resize
pdfjs-editor-resizer-label-middle-left = Middle left — resize
pdfjs-editor-highlight-colorpicker-label = Highlight color
pdfjs-editor-colorpicker-button =
    .title = Change color
pdfjs-editor-colorpicker-dropdown =
    .aria-label = Color choices
pdfjs-editor-colorpicker-yellow =
    .title = Yellow
pdfjs-editor-colorpicker-green =
    .title = Green
pdfjs-editor-colorpicker-blue =
    .title = Blue
pdfjs-editor-colorpicker-pink =
    .title = Pink
pdfjs-editor-colorpicker-red =
    .title = Red
pdfjs-editor-highlight-show-all-button-label = Show all
pdfjs-editor-highlight-show-all-button =
    .title = Show all`)}}const un=1e3,cn=50,dn=1e3;function xe(){return document.location.hash}class fn{#e=null;constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:i=!1}){if(!e||typeof e!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const n=this._fingerprint!==""&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=i===!0,this._initialized=!0,this.#l();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=xe(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#i(s,!0)||t){const{hash:o,page:l,rotation:h}=this.#o(!0);if(!o||n||t){this.#t(null,!0);return}this.#t({hash:o,page:l,rotation:h},!0);return}const a=s.destination;this.#a(a,s.uid,!0),a.rotation!==void 0&&(this._initialRotation=a.rotation),a.dest?(this._initialBookmark=JSON.stringify(a.dest),this._destination.page=null):a.hash?this._initialBookmark=a.hash:a.page&&(this._initialBookmark=`page=${a.page}`)}reset(){this._initialized&&(this.#r(),this._initialized=!1,this.#p()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:i}){if(!this._initialized)return;if(e&&typeof e!="string"){console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);return}else if(Array.isArray(t)){if(!this.#n(i)&&(i!==null||this._destination)){console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${t}" is not a valid explicitDest parameter.`);return}const n=e||JSON.stringify(t);if(!n)return;let s=!1;if(this._destination&&(pn(this._destination.hash,n)||gn(this._destination.dest,t))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#t({dest:t,hash:n,page:i,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#n(e)){console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);return}this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#s()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#i(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#i(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,t=!1){const i=t||!this._destination,n={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:e};this.#a(e,n.uid);let s;if(this._updateUrl&&e?.hash){const a=document.location.href.split("#",1)[0];a.startsWith("file://")||(s=`${a}#${e.hash}`)}i?window.history.replaceState(n,"",s):window.history.pushState(n,"",s)}#s(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination){this.#t(t);return}if(this._destination.temporary){this.#t(t,!0);return}if(this._destination.hash===t.hash||!this._destination.page&&this._numPositionUpdates<=cn)return;let i=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(this._destination.dest!==void 0||!this._destination.first)return;i=!0}this.#t(t,i)}#n(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#i(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint)if(t){if(typeof e.fingerprint!="string"||e.fingerprint.length!==this._fingerprint.length)return!1;const[i]=performance.getEntriesByType("navigation");if(i?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(e.uid)||e.uid<0||e.destination===null||typeof e.destination!="object")}#a(e,t,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}#o(e=!1){const t=unescape(xe()).substring(1),i=pe(t),n=i.get("nameddest")||"";let s=i.get("page")|0;return(!this.#n(s)||e&&n.length>0)&&(s=null),{hash:t,page:s,rotation:this.linkService.rotation}}#h({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#s(!0),this._updateViewareaTimeout=null},dn))}#d({state:e}){const t=xe(),i=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;const{hash:s,page:a,rotation:o}=this.#o();this.#t({hash:s,page:a,rotation:o},!0);return}if(!this.#i(e))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,mi({target:window,name:"hashchange",delay:un}).then(()=>{this._blockHashChange--}));const n=e.destination;this.#a(n,e.uid,!0),ut(n.rotation)&&(this.linkService.rotation=n.rotation),n.dest?this.linkService.goToDestination(n.dest):n.hash?this.linkService.setHash(n.hash):n.page&&(this.linkService.page=n.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#r(){(!this._destination||this._destination.temporary)&&this.#s()}#l(){if(this.#e)return;this.#e=new AbortController;const{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#h.bind(this),{signal:e}),window.addEventListener("popstate",this.#d.bind(this),{signal:e}),window.addEventListener("pagehide",this.#r.bind(this),{signal:e})}#p(){this.#e?.abort(),this.#e=null}}function pn(r,e){return typeof r!="string"||typeof e!="string"?!1:r===e||pe(r).get("nameddest")===e}function gn(r,e){function t(i,n){if(typeof i!=typeof n||Array.isArray(i)||Array.isArray(n))return!1;if(i!==null&&typeof i=="object"&&n!==null){if(Object.keys(i).length!==Object.keys(n).length)return!1;for(const s in i)if(!t(i[s],n[s]))return!1;return!0}return i===n||Number.isNaN(i)&&Number.isNaN(n)}if(!(Array.isArray(r)&&Array.isArray(e))||r.length!==e.length)return!1;for(let i=0,n=r.length;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}class mn{#e=null;#t=null;#s=null;#n=null;#i;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new H,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#i=e.uiManager,this.#e=e.annotationLayer||null,this.#n=e.textLayer||null,this.#t=e.drawLayer||null,this.#s=e.onAppend||null}async render(e,t="display"){if(t!=="display"||this._cancelled)return;const i=e.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:i}),this.show();return}const n=this.div=document.createElement("div");n.className="annotationEditorLayer",n.hidden=!0,n.dir=this.#i.direction,this.#s?.(n),this.annotationEditorLayer=new ri({uiManager:this.#i,div:n,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:i,annotationLayer:this.#e,textLayer:this.#n,drawLayer:this.#t});const s={viewport:i,div:n,annotations:null,intent:t};this.annotationEditorLayer.render(s),this.show()}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}}{var se=Object.create(null);const r=navigator.userAgent||"",e=navigator.platform||"",t=navigator.maxTouchPoints||1,i=/Android/.test(r),n=/\b(iPad|iPhone|iPod)(?=;)/.test(r)||e==="MacIntel"&&t>1;(function(){(n||i)&&(se.maxCanvasPixels=5242880)})()}const d={BROWSER:1,VIEWER:2,API:4,WORKER:8,PREFERENCE:128},G={canvasMaxAreaInBytes:{value:-1,kind:d.BROWSER+d.API},isInAutomation:{value:!1,kind:d.BROWSER},supportsCaretBrowsingMode:{value:!1,kind:d.BROWSER},supportsDocumentFonts:{value:!0,kind:d.BROWSER},supportsIntegratedFind:{value:!1,kind:d.BROWSER},supportsMouseWheelZoomCtrlKey:{value:!0,kind:d.BROWSER},supportsMouseWheelZoomMetaKey:{value:!0,kind:d.BROWSER},supportsPinchToZoom:{value:!0,kind:d.BROWSER},annotationEditorMode:{value:0,kind:d.VIEWER+d.PREFERENCE},annotationMode:{value:2,kind:d.VIEWER+d.PREFERENCE},cursorToolOnLoad:{value:0,kind:d.VIEWER+d.PREFERENCE},debuggerSrc:{value:"./debugger.mjs",kind:d.VIEWER},defaultZoomDelay:{value:400,kind:d.VIEWER+d.PREFERENCE},defaultZoomValue:{value:"",kind:d.VIEWER+d.PREFERENCE},disableHistory:{value:!1,kind:d.VIEWER},disablePageLabels:{value:!1,kind:d.VIEWER+d.PREFERENCE},enableHighlightEditor:{value:!1,kind:d.VIEWER+d.PREFERENCE},enableHighlightFloatingButton:{value:!1,kind:d.VIEWER+d.PREFERENCE},enableML:{value:!1,kind:d.VIEWER+d.PREFERENCE},enablePermissions:{value:!1,kind:d.VIEWER+d.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:d.VIEWER+d.PREFERENCE},enableScripting:{value:!0,kind:d.VIEWER+d.PREFERENCE},enableStampEditor:{value:!0,kind:d.VIEWER+d.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:d.VIEWER},externalLinkTarget:{value:0,kind:d.VIEWER+d.PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:d.VIEWER+d.PREFERENCE},historyUpdateUrl:{value:!1,kind:d.VIEWER+d.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:d.VIEWER+d.PREFERENCE},imageResourcesPath:{value:"./images/",kind:d.VIEWER},maxCanvasPixels:{value:2**25,kind:d.VIEWER},forcePageColors:{value:!1,kind:d.VIEWER+d.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:d.VIEWER+d.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:d.VIEWER+d.PREFERENCE},pdfBugEnabled:{value:!1,kind:d.VIEWER+d.PREFERENCE},printResolution:{value:150,kind:d.VIEWER},sidebarViewOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},scrollModeOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},spreadModeOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},textLayerMode:{value:1,kind:d.VIEWER+d.PREFERENCE},viewOnLoad:{value:0,kind:d.VIEWER+d.PREFERENCE},cMapPacked:{value:!0,kind:d.API},cMapUrl:{value:"../web/cmaps/",kind:d.API},disableAutoFetch:{value:!1,kind:d.API+d.PREFERENCE},disableFontFace:{value:!1,kind:d.API+d.PREFERENCE},disableRange:{value:!1,kind:d.API+d.PREFERENCE},disableStream:{value:!1,kind:d.API+d.PREFERENCE},docBaseUrl:{value:"",kind:d.API},enableHWA:{value:!0,kind:d.API+d.VIEWER+d.PREFERENCE},enableXfa:{value:!0,kind:d.API+d.PREFERENCE},fontExtraProperties:{value:!1,kind:d.API},isEvalSupported:{value:!0,kind:d.API},isOffscreenCanvasSupported:{value:!0,kind:d.API},maxImageSize:{value:-1,kind:d.API},pdfBug:{value:!1,kind:d.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:d.API},verbosity:{value:1,kind:d.API},workerPort:{value:null,kind:d.WORKER},workerSrc:{value:"../build/pdf.worker.mjs",kind:d.WORKER}};G.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:d.VIEWER},G.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:d.VIEWER},G.viewerCssTheme={value:0,kind:d.VIEWER+d.PREFERENCE};G.disablePreferences={value:!1,kind:d.VIEWER},G.locale={value:navigator.language||"en-US",kind:d.VIEWER};const z=Object.create(null);for(const r in se)z[r]=se[r];class bn{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){return z[e]??G[e]?.value??void 0}static getAll(e=null,t=!1){const i=Object.create(null);for(const n in G){const s=G[n];e&&!(e&s.kind)||(i[n]=t?s.value:z[n]??s.value)}return i}static set(e,t){z[e]=t}static setAll(e,t=!1){if(t){if(this.get("disablePreferences"))return;for(const i in z)if(se[i]===void 0){console.warn('setAll: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');break}}for(const i in e)z[i]=e[i]}static remove(e){delete z[e];const t=se[e];t!==void 0&&(z[e]=t)}}class En{#e=null;constructor(e){this.pageIndex=e.pageIndex}async render(e="display"){e!=="display"||this.#e||this._cancelled||(this.#e=new hi({pageIndex:this.pageIndex}))}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}}const rt={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},wn=/^H(\d+)$/;class mt{#e=void 0;get renderingDone(){return this.#e!==void 0}render(e){if(this.#e!==void 0)return this.#e;const t=this.#s(e);return t?.classList.add("structTree"),this.#e=t}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#t(e,t){const{alt:i,id:n,lang:s}=e;i!==void 0&&t.setAttribute("aria-label",ue(i)),n!==void 0&&t.setAttribute("aria-owns",n),s!==void 0&&t.setAttribute("lang",ue(s,!0))}#s(e){if(!e)return null;const t=document.createElement("span");if("role"in e){const{role:i}=e,n=i.match(wn);n?(t.setAttribute("role","heading"),t.setAttribute("aria-level",n[1])):rt[i]&&t.setAttribute("role",rt[i])}if(this.#t(e,t),e.children)if(e.children.length===1&&"id"in e.children[0])this.#t(e.children[0],t);else for(const i of e.children)t.append(this.#s(i));return t}}class te{#e=!1;#t=null;#s=new Map;#n=new Map;setTextMapping(e){this.#t=e}static#i(e,t){const i=e.getBoundingClientRect(),n=t.getBoundingClientRect();if(i.width===0&&i.height===0)return 1;if(n.width===0&&n.height===0)return-1;const s=i.y,a=i.y+i.height,o=i.y+i.height/2,l=n.y,h=n.y+n.height,u=n.y+n.height/2;if(o<=l&&u>=a)return-1;if(u<=s&&o>=h)return 1;const f=i.x+i.width/2,p=n.x+n.width/2;return f-p}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(te.#i),this.#s.size>0){const e=this.#t;for(const[t,i]of this.#s){if(!document.getElementById(t)){this.#s.delete(t);continue}this.#a(t,e[i])}}for(const[e,t]of this.#n)this.addPointerInTextLayer(e,t);this.#n.clear()}disable(){this.#e&&(this.#n.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e){this.#n.delete(e);return}const t=this.#t;if(!t||t.length===0)return;const{id:i}=e,n=this.#s.get(i);if(n===void 0)return;const s=t[n];this.#s.delete(i);let a=s.getAttribute("aria-owns");a?.includes(i)&&(a=a.split(" ").filter(o=>o!==i).join(" "),a?s.setAttribute("aria-owns",a):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#a(e,t){const i=t.getAttribute("aria-owns");i?.includes(e)||t.setAttribute("aria-owns",i?`${i} ${e}`:e),t.removeAttribute("role")}addPointerInTextLayer(e,t){const{id:i}=e;if(!i)return null;if(!this.#e)return this.#n.set(e,t),null;t&&this.removePointerInTextLayer(e);const n=this.#t;if(!n||n.length===0)return null;const s=ie(n,h=>te.#i(e,h)<0),a=Math.max(0,s-1),o=n[a];this.#a(i,o),this.#s.set(i,a);const l=o.parentNode;return l?.classList.contains("markedContent")?l.id:null}moveElementInDOM(e,t,i,n){const s=this.addPointerInTextLayer(i,n);if(!e.hasChildNodes())return e.append(t),s;const a=Array.from(e.childNodes).filter(h=>h!==t);if(a.length===0)return s;const o=i||t,l=ie(a,h=>te.#i(o,h)<0);return l===0?a[0].before(t):a[l-1].after(t),s}}class _n{#e=null;constructor({findController:e,eventBus:t,pageIndex:i}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||e.pageIndex===-1)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];const{textContentItemsStr:i}=this;let n=0,s=0;const a=i.length-1,o=[];for(let l=0,h=e.length;l<h;l++){let u=e[l];for(;n!==a&&u>=s+i[n].length;)s+=i[n].length,n++;n===i.length&&console.error("Could not find a matching mapping");const f={begin:{divIdx:n,offset:u-s}};for(u+=t[l];n!==a&&u>s+i[n].length;)s+=i[n].length,n++;f.end={divIdx:n,offset:u-s},o.push(f)}return o}_renderMatches(e){if(e.length===0)return;const{findController:t,pageIdx:i}=this,{textContentItemsStr:n,textDivs:s}=this,a=i===t.selected.pageIdx,o=t.selected.matchIdx,l=t.state.highlightAll;let h=null;const u={divIdx:-1,offset:void 0};function f(x,L){const w=x.divIdx;return s[w].textContent="",p(w,0,x.offset,L)}function p(x,L,w,E){let I=s[x];if(I.nodeType===Node.TEXT_NODE){const P=document.createElement("span");I.before(P),P.append(I),s[x]=P,I=P}const m=n[x].substring(L,w),_=document.createTextNode(m);if(E){const P=document.createElement("span");return P.className=`${E} appended`,P.append(_),I.append(P),E.includes("selected")?P.offsetLeft:0}return I.append(_),0}let y=o,b=y+1;if(l)y=0,b=e.length;else if(!a)return;let v=-1,C=-1;for(let x=y;x<b;x++){const L=e[x],w=L.begin;if(w.divIdx===v&&w.offset===C)continue;v=w.divIdx,C=w.offset;const E=L.end,I=a&&x===o,m=I?" selected":"";let _=0;if(!h||w.divIdx!==h.divIdx?(h!==null&&p(h.divIdx,h.offset,u.offset),f(w)):p(h.divIdx,h.offset,w.offset),w.divIdx===E.divIdx)_=p(w.divIdx,w.offset,E.offset,"highlight"+m);else{_=p(w.divIdx,w.offset,u.offset,"highlight begin"+m);for(let P=w.divIdx+1,c=E.divIdx;P<c;P++)s[P].className="highlight middle"+m;f(E,"highlight end"+m)}h=E,I&&t.scrollMatchIntoView({element:s[w.divIdx],selectedLeft:_,pageIndex:i,matchIndex:o})}h&&p(h.divIdx,h.offset,u.offset)}_updateMatches(e=!1){if(!this.enabled&&!e)return;const{findController:t,matches:i,pageIdx:n}=this,{textContentItemsStr:s,textDivs:a}=this;let o=-1;for(const u of i){const f=Math.max(o,u.begin.divIdx);for(let p=f,y=u.end.divIdx;p<=y;p++){const b=a[p];b.textContent=s[p],b.className=""}o=u.end.divIdx+1}if(!t?.highlightMatches||e)return;const l=t.pageMatches[n]||null,h=t.pageMatchesLength[n]||null;this.matches=this._convertMatches(l,h),this._renderMatches(this.matches)}}class Q{#e=!1;#t=null;#s=!1;#n=null;static#i=new Map;static#a=null;constructor({pdfPage:e,highlighter:t=null,accessibilityManager:i=null,enablePermissions:n=!1,onAppend:s=null}){this.pdfPage=e,this.highlighter=t,this.accessibilityManager=i,this.#e=n===!0,this.#t=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}async render(e,t=null){if(this.#s&&this.#n){this.#n.update({viewport:e,onBefore:this.hide.bind(this)}),this.show();return}this.cancel(),this.#n=new pi({textContentSource:this.pdfPage.streamTextContent(t||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:e});const{textDivs:i,textContentItemsStr:n}=this.#n;this.highlighter?.setTextMapping(i,n),this.accessibilityManager?.setTextMapping(i),await this.#n.render(),this.#s=!0;const s=document.createElement("div");s.className="endOfContent",this.div.append(s),this.#o(s),this.#t?.(this.div),this.highlighter?.enable(),this.accessibilityManager?.enable()}hide(){!this.div.hidden&&this.#s&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#s&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#n?.cancel(),this.#n=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),Q.#h(this.div)}#o(e){const{div:t}=this;t.addEventListener("mousedown",i=>{e.classList.add("active")}),t.addEventListener("copy",i=>{if(!this.#e){const n=document.getSelection();i.clipboardData.setData("text/plain",ue(di(n.toString())))}i.preventDefault(),i.stopPropagation()}),Q.#i.set(t,e),Q.#d()}static#h(e){this.#i.delete(e),this.#i.size===0&&(this.#a?.abort(),this.#a=null)}static#d(){if(this.#a)return;this.#a=new AbortController;const{signal:e}=this.#a,t=(s,a)=>{a.append(s),s.style.width="",s.style.height="",s.classList.remove("active")};document.addEventListener("pointerup",()=>{this.#i.forEach(t)},{signal:e});var i,n;document.addEventListener("selectionchange",()=>{const s=document.getSelection();if(s.rangeCount===0){this.#i.forEach(t);return}const a=new Set;for(let p=0;p<s.rangeCount;p++){const y=s.getRangeAt(p);for(const b of this.#i.keys())!a.has(b)&&y.intersectsNode(b)&&a.add(b)}for(const[p,y]of this.#i)a.has(p)?y.classList.add("active"):t(y,p);if(i??=getComputedStyle(this.#i.values().next().value).getPropertyValue("-moz-user-select")==="none",i)return;const o=s.getRangeAt(0),l=n&&(o.compareBoundaryPoints(Range.END_TO_END,n)===0||o.compareBoundaryPoints(Range.START_TO_END,n)===0);let h=l?o.startContainer:o.endContainer;h.nodeType===Node.TEXT_NODE&&(h=h.parentNode);const u=h.parentElement.closest(".textLayer"),f=this.#i.get(u);f&&(f.style.width=u.style.width,f.style.height=u.style.height,h.parentElement.insertBefore(f,l?h:h.nextSibling)),n=o.cloneRange()},{signal:e})}}class bt{constructor({pdfPage:e,annotationStorage:t=null,linkService:i,xfaHtml:n=null}){this.pdfPage=e,this.annotationStorage=t,this.linkService=i,this.xfaHtml=n,this.div=null,this._cancelled=!1}async render(e,t="display"){if(t==="print"){const s={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div=document.createElement("div"),s.div=this.div,ye.render(s)}const i=await this.pdfPage.getXfa();if(this._cancelled||!i)return{textDivs:[]};const n={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?ye.update(n):(this.div=document.createElement("div"),n.div=this.div,ye.render(n))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}const yn={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new Ae}},vn=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class Et{#e=B.ENABLE_FORMS;#t=!1;#s=!1;#n=null;#i=null;#a=null;#o=null;#h=R.INITIAL;#d=O.ENABLE;#r={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#l=new WeakMap;#p=[null,null,null,null];constructor(e){const t=e.container,i=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.#n=e.layerProperties||yn,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||lt,this.viewport=i,this.pdfPageRotate=i.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#d=e.textLayerMode??O.ENABLE,this.#e=e.annotationMode??B.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=e.maxCanvasPixels??bn.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,this.#t=e.enableHWA||!1,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||=new H,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=t,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;const n=document.createElement("div");if(n.className="page",n.setAttribute("data-page-number",this.id),n.setAttribute("role","region"),n.setAttribute("data-l10n-id","pdfjs-page-landmark"),n.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=n,this.#c(),t?.append(n),this._isStandalone){t?.style.setProperty("--scale-factor",this.scale*V.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:s}=e;s&&s.then(a=>{s===this._optionalContentConfigPromise&&(this.#r.initialOptionalContent=a.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#u(e,t){const i=vn.get(t),n=this.#p[i];if(this.#p[i]=e,n){n.replaceWith(e);return}for(let s=i-1;s>=0;s--){const a=this.#p[s];if(a){a.after(e);return}}this.div.prepend(e)}get renderingState(){return this.#h}set renderingState(e){if(e!==this.#h)switch(this.#h=e,this.#i&&(clearTimeout(this.#i),this.#i=null),e){case R.PAUSED:this.div.classList.remove("loading");break;case R.RUNNING:this.div.classList.add("loadingIcon"),this.#i=setTimeout(()=>{this.div.classList.add("loading"),this.#i=null},0);break;case R.INITIAL:case R.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}#c(){const{viewport:e}=this;if(this.pdfPage){if(this.#a===e.rotation)return;this.#a=e.rotation}fi(this.div,e,!0,!1)}setPdfPage(e){this._isStandalone&&(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*V.PDF_TO_CSS_UNITS,rotation:t}),this.#c(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}get _textHighlighter(){return ce(this,"_textHighlighter",new _n({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#n.findController}))}#f(e,t){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:t})}async#g(){let e=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(t){console.error(`#renderAnnotationLayer: "${t}".`),e=t}finally{this.#f("annotationlayerrendered",e)}}async#E(){let e=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(t){console.error(`#renderAnnotationEditorLayer: "${t}".`),e=t}finally{this.#f("annotationeditorlayerrendered",e)}}async#b(){try{await this.drawLayer.render("display")}catch(e){console.error(`#renderDrawLayer: "${e}".`)}}async#m(){let e=null;try{const t=await this.xfaLayer.render(this.viewport,"display");t?.textDivs&&this._textHighlighter&&this.#P(t.textDivs)}catch(t){console.error(`#renderXfaLayer: "${t}".`),e=t}finally{this.xfaLayer?.div&&(this.l10n.pause(),this.#u(this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),this.#f("xfalayerrendered",e)}}async#_(){if(!this.textLayer)return;let e=null;try{await this.textLayer.render(this.viewport)}catch(t){if(t instanceof si)return;console.error(`#renderTextLayer: "${t}".`),e=t}this.#f("textlayerrendered",e),this.#v()}async#v(){if(!this.textLayer)return;this.structTreeLayer||=new mt;const e=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),t=this.structTreeLayer?.render(e);t&&(this.l10n.pause(),this.canvas?.append(t),this.l10n.resume()),this.structTreeLayer?.show()}async#P(e){const t=await this.pdfPage.getTextContent(),i=[];for(const n of t.items)i.push(n.str);this._textHighlighter.setTextMapping(e,i),this._textHighlighter.enable()}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;const t=this.zoomLayer.firstChild;this.#l.delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:i=!1,keepXfaLayer:n=!1,keepTextLayer:s=!1}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:i,keepXfaLayer:n,keepTextLayer:s}),this.renderingState=R.INITIAL;const a=this.div,o=a.childNodes,l=e&&this.zoomLayer||null,h=t&&this.annotationLayer?.div||null,u=i&&this.annotationEditorLayer?.div||null,f=n&&this.xfaLayer?.div||null,p=s&&this.textLayer?.div||null;for(let y=o.length-1;y>=0;y--){const b=o[y];switch(b){case l:case h:case u:case f:case p:continue}b.remove();const v=this.#p.indexOf(b);v>=0&&(this.#p[v]=null)}a.removeAttribute("data-loaded"),h&&this.annotationLayer.hide(),u&&this.annotationEditorLayer.hide(),f&&this.xfaLayer.hide(),p&&this.textLayer.hide(),this.structTreeLayer?.hide(),l||(this.canvas&&(this.#l.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:i=null,drawingDelay:n=-1}){this.scale=e||this.scale,typeof t=="number"&&(this.rotation=t),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(a=>{i===this._optionalContentConfigPromise&&(this.#r.initialOptionalContent=a.hasInitialVisibility)})),this.#r.directDrawing=!0;const s=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*V.PDF_TO_CSS_UNITS,rotation:s}),this.#c(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let a=!1;if(this.#s){if(this.maxCanvasPixels===0)a=!0;else if(this.maxCanvasPixels>0){const{width:l,height:h}=this.viewport,{sx:u,sy:f}=this.outputScale;a=(Math.floor(l)*u|0)*(Math.floor(h)*f|0)>this.maxCanvasPixels}}const o=n>=0&&n<1e3;if(o||a){if(o&&!a&&this.renderingState!==R.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:n}),this.renderingState=R.FINISHED,this.#r.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!o,hideTextLayer:o}),o)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#o});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:i=!1,keepTextLayer:n=!1,cancelExtraDelay:s=0}={}){this.renderTask&&(this.renderTask.cancel(s),this.renderTask=null),this.resume=null,this.textLayer&&(!n||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!i||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:e,redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:i=!1,redrawXfaLayer:n=!1,redrawTextLayer:s=!1,hideTextLayer:a=!1}){if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);const{style:l}=e;l.width=l.height=""}const o=this.#l.get(e);if(this.viewport!==o){const l=this.viewport.rotation-o.rotation,h=Math.abs(l);let u=1,f=1;if(h===90||h===270){const{width:p,height:y}=this.viewport;u=y/p,f=p/y}e.style.transform=`rotate(${l}deg) scale(${u}, ${f})`}t&&this.annotationLayer&&this.#g(),i&&this.annotationEditorLayer&&(this.drawLayer&&this.#b(),this.#E()),n&&this.xfaLayer&&this.#m(),this.textLayer&&(a?(this.textLayer.hide(),this.structTreeLayer?.hide()):s&&this.#_())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}async#w(e,t=null){if(e===this.renderTask&&(this.renderTask=null),t instanceof Se){this.#o=null;return}if(this.#o=t,this.renderingState=R.FINISHED,this._resetZoomLayer(!0),this.#r.regularAnnotations=!e.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#o}),t)throw t}async draw(){this.renderingState!==R.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:e,l10n:t,pageColors:i,pdfPage:n,viewport:s}=this;if(!n)throw this.renderingState=R.FINISHED,new Error("pdfPage is not loaded");this.renderingState=R.RUNNING;const a=document.createElement("div");if(a.classList.add("canvasWrapper"),this.#u(a,"canvasWrapper"),!this.textLayer&&this.#d!==O.DISABLE&&!n.isPureXfa&&(this._accessibilityManager||=new te,this.textLayer=new Q({pdfPage:n,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:this.#d===O.ENABLE_PERMISSIONS,onAppend:m=>{this.l10n.pause(),this.#u(m,"textLayer"),this.l10n.resume()}})),!this.annotationLayer&&this.#e!==B.DISABLE){const{annotationStorage:m,annotationEditorUIManager:_,downloadManager:P,enableScripting:c,fieldObjectsPromise:g,hasJSActionsPromise:A,linkService:D}=this.#n;this._annotationCanvasMap||=new Map,this.annotationLayer=new ct({pdfPage:n,annotationStorage:m,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===B.ENABLE_FORMS,linkService:D,downloadManager:P,enableScripting:c,hasJSActionsPromise:A,fieldObjectsPromise:g,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:_,onAppend:j=>{this.#u(j,"annotationLayer")}})}const o=m=>{if(p?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=R.PAUSED,this.resume=()=>{this.renderingState=R.RUNNING,m()};return}m()},{width:l,height:h}=s,u=document.createElement("canvas");u.setAttribute("role","presentation"),u.hidden=!0;const f=!!(i?.background&&i?.foreground);let p=m=>{(!f||m)&&(u.hidden=!1,p=null)};a.append(u),this.canvas=u;const y=u.getContext("2d",{alpha:!1,willReadFrequently:!this.#t}),b=this.outputScale=new St;if(this.maxCanvasPixels===0){const m=1/this.scale;b.sx*=m,b.sy*=m,this.#s=!0}else if(this.maxCanvasPixels>0){const m=l*h,_=Math.sqrt(this.maxCanvasPixels/m);b.sx>_||b.sy>_?(b.sx=_,b.sy=_,this.#s=!0):this.#s=!1}const v=Me(b.sx),C=Me(b.sy);u.width=re(l*b.sx,v[0]),u.height=re(h*b.sy,C[0]);const{style:x}=u;x.width=re(l,v[1])+"px",x.height=re(h,C[1])+"px",this.#l.set(u,s);const L=b.scaled?[b.sx,0,0,b.sy,0,0]:null,w={canvasContext:y,transform:L,viewport:s,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:i},E=this.renderTask=n.render(w);E.onContinue=o;const I=E.promise.then(async()=>{p?.(!0),await this.#w(E),this.#_(),this.annotationLayer&&await this.#g();const{annotationEditorUIManager:m}=this.#n;m&&(this.drawLayer||=new En({pageIndex:this.id}),await this.#b(),this.drawLayer.setParent(a),this.annotationEditorLayer||(this.annotationEditorLayer=new mn({uiManager:m,pdfPage:n,l10n:t,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:_=>{this.#u(_,"annotationEditorLayer")}})),this.#E())},m=>(m instanceof Se||p?.(!0),this.#w(E,m)));if(n.isPureXfa){if(!this.xfaLayer){const{annotationStorage:m,linkService:_}=this.#n;this.xfaLayer=new bt({pdfPage:n,annotationStorage:m,linkService:_})}this.#m()}return e.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),I}setPageLabel(e){this.pageLabel=typeof e=="string"?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:e,initialOptionalContent:t,regularAnnotations:i}=this.#r;return e&&t&&i?this.canvas:null}}async function Pn(r){const e="",t=e.split("#",1)[0];let{info:i,metadata:n,contentDispositionFilename:s,contentLength:a}=await r.getMetadata();if(!a){const{length:o}=await r.getDownloadInfo();a=o}return{...i,baseURL:t,filesize:a,filename:s||ui(e),metadata:n?.getRaw(),authors:n?.get("dc:creator"),numPages:r.numPages,URL:e}}class xn{constructor(e){this._ready=new Promise((t,i)=>{import(e).then(s=>{t(s.QuickJSSandbox())}).catch(i)})}async createSandbox(e){(await this._ready).create(e)}async dispatchEventInSandbox(e){const t=await this._ready;setTimeout(()=>t.dispatchEvent(e),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}class Sn{#e=null;#t=null;#s=null;#n=null;#i=null;#a=null;#o=null;#h=null;#d=!1;#r=null;#l=null;constructor({eventBus:e,externalServices:t=null,docProperties:i=null}){this.#i=e,this.#a=t,this.#s=i}setViewer(e){this.#h=e}async setDocument(e){if(this.#o&&await this.#g(),this.#o=e,!e)return;const[t,i,n]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!t&&!n){await this.#g();return}if(e!==this.#o)return;try{this.#r=this.#f()}catch(o){console.error(`setDocument: "${o.message}".`),await this.#g();return}const s=this.#i;this.#n=new AbortController;const{signal:a}=this.#n;s._on("updatefromsandbox",o=>{o?.source===window&&this.#p(o.detail)},{signal:a}),s._on("dispatcheventinsandbox",o=>{this.#r?.dispatchEventInSandbox(o.detail)},{signal:a}),s._on("pagechanging",({pageNumber:o,previous:l})=>{o!==l&&(this.#c(l),this.#u(o))},{signal:a}),s._on("pagerendered",({pageNumber:o})=>{this._pageOpenPending.has(o)&&o===this.#h.currentPageNumber&&this.#u(o)},{signal:a}),s._on("pagesdestroy",async()=>{await this.#c(this.#h.currentPageNumber),await this.#r?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this.#e?.resolve()},{signal:a});try{const o=await this.#s(e);if(e!==this.#o)return;await this.#r.createSandbox({objects:t,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...o,actions:n}}),s.dispatch("sandboxcreated",{source:this})}catch(o){console.error(`setDocument: "${o.message}".`),await this.#g();return}await this.#r?.dispatchEventInSandbox({id:"doc",name:"Open"}),await this.#u(this.#h.currentPageNumber,!0),Promise.resolve().then(()=>{e===this.#o&&(this.#d=!0)})}async dispatchWillSave(){return this.#r?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){return this.#r?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){if(this.#r){await this.#l?.promise,this.#l=Promise.withResolvers();try{await this.#r.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(e){throw this.#l.resolve(),this.#l=null,e}await this.#l.promise}}async dispatchDidPrint(){return this.#r?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#d}get _pageOpenPending(){return ce(this,"_pageOpenPending",new Set)}get _visitedPages(){return ce(this,"_visitedPages",new Map)}async#p(e){const t=this.#h,i=t.isInPresentationMode||t.isChangingPresentationMode,{id:n,siblings:s,command:a,value:o}=e;if(!n){switch(a){case"clear":console.clear();break;case"error":console.error(o);break;case"layout":if(!i){const h=kt(o);t.spreadMode=h.spreadMode}break;case"page-num":t.currentPageNumber=o+1;break;case"print":await t.pagesPromise,this.#i.dispatch("print",{source:this});break;case"println":console.log(o);break;case"zoom":i||(t.currentScaleValue=o);break;case"SaveAs":this.#i.dispatch("download",{source:this});break;case"FirstPage":t.currentPageNumber=1;break;case"LastPage":t.currentPageNumber=t.pagesCount;break;case"NextPage":t.nextPage();break;case"PrevPage":t.previousPage();break;case"ZoomViewIn":i||t.increaseScale();break;case"ZoomViewOut":i||t.decreaseScale();break;case"WillPrintFinished":this.#l?.resolve(),this.#l=null;break}return}if(i&&e.focus)return;delete e.id,delete e.siblings;const l=s?[n,...s]:[n];for(const h of l){const u=document.querySelector(`[data-element-id="${h}"]`);u?u.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):this.#o?.annotationStorage.setValue(h,e)}}async#u(e,t=!1){const i=this.#o,n=this._visitedPages;if(t&&(this.#e=Promise.withResolvers()),!this.#e)return;const s=this.#h.getPageView(e-1);if(s?.renderingState!==R.FINISHED){this._pageOpenPending.add(e);return}this._pageOpenPending.delete(e);const a=(async()=>{const o=await(n.has(e)?null:s.pdfPage?.getJSActions());i===this.#o&&await this.#r?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:o})})();n.set(e,a)}async#c(e){const t=this.#o,i=this._visitedPages;if(!this.#e||this._pageOpenPending.has(e))return;const n=i.get(e);n&&(i.set(e,null),await n,t===this.#o&&await this.#r?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e}))}#f(){if(this.#t=Promise.withResolvers(),this.#r)throw new Error("#initScripting: Scripting already exists.");return this.#a.createScripting()}async#g(){if(!this.#r){this.#o=null,this.#t?.resolve();return}this.#e&&(await Promise.race([this.#e.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(()=>{}),this.#e=null),this.#o=null;try{await this.#r.destroySandbox()}catch{}this.#l?.reject(new Error("Scripting destroyed.")),this.#l=null,this.#n?.abort(),this.#n=null,this._pageOpenPending.clear(),this._visitedPages.clear(),this.#r=null,this.#d=!1,this.#t?.resolve()}}class Ln extends Sn{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),e.externalServices||={createScripting:()=>new xn(e.sandboxBundleSrc)},e.docProperties||=t=>Pn(t),super(e)}}const In=3e4;class An{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),In)))}getHighestPriority(e,t,i,n=!1){const s=e.views,a=s.length;if(a===0)return null;for(let f=0;f<a;f++){const p=s[f].view;if(!this.isViewFinished(p))return p}const o=e.first.id,l=e.last.id;if(l-o+1>a){const f=e.ids;for(let p=1,y=l-o;p<y;p++){const b=i?o+p:l-p;if(f.has(b))continue;const v=t[b-1];if(!this.isViewFinished(v))return v}}let h=i?l:o-2,u=t[h];return u&&!this.isViewFinished(u)||n&&(h+=i?1:-1,u=t[h],u&&!this.isViewFinished(u))?u:null}isViewFinished(e){return e.renderingState===R.FINISHED}renderView(e){switch(e.renderingState){case R.FINISHED:return!1;case R.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case R.RUNNING:this.highestPriorityPage=e.renderingId;break;case R.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof Se||console.error(`renderView: "${t}"`)});break}return!0}}const at=10,he={FORCE_SCROLL_MODE_PAGE:1e4,FORCE_LAZY_PAGE_INIT:5e3,PAUSE_EAGER_PAGE_INIT:250};function ot(r){return Object.values(W).includes(r)&&r!==W.DISABLE}class Tn{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){const t=this.#e;t.has(e)&&t.delete(e),t.add(e),t.size>this.#t&&this.#s()}resize(e,t=null){this.#t=e;const i=this.#e;if(t){const n=i.size;let s=1;for(const a of i)if(t.has(a.id)&&(i.delete(a),i.add(a)),++s>n)break}for(;i.size>this.#t;)this.#s()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#s(){const e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}}class wt{#e=null;#t=null;#s=null;#n=W.NONE;#i=null;#a=B.ENABLE_FORMS;#o=null;#h=!1;#d=!1;#r=!1;#l=null;#p=null;#u=!1;#c=null;#f=!1;#g=0;#E=new ResizeObserver(this.#M.bind(this));#b=null;#m=null;#_=O.ENABLE;constructor(e){const t="4.4.168";if(Ue!==t)throw new Error(`The API version "${Ue}" does not match the Viewer version "${t}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#E.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new Ae,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=n=>this._getVisiblePages().ids.has(n)),this._scriptingManager=e.scriptingManager||null,this.#_=e.textLayerMode??O.ENABLE,this.#a=e.annotationMode??B.ENABLE_FORMS,this.#n=e.annotationEditorMode??W.NONE,this.#s=e.annotationEditorHighlightColors||null,this.#d=e.enableHighlightFloatingButton===!0,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||=new H,this.#r=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#p=e.mlManager||null,this.#h=e.enableHWA||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new An,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;const{abortSignal:i}=e;i?.addEventListener("abort",()=>{this.#E.disconnect(),this.#E=null},{once:!0}),this.scroll=Lt(this.container,this._scrollUpdate.bind(this),i),this.presentationModeState=X.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#A(),this.eventBus._on("thumbnailrendered",({pageNumber:n,pdfPage:s})=>{const a=this._pages[n-1];this.#e.has(a)||s?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#a===B.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,t=!1){if(this._currentPageNumber===e)return t&&this.#I(),!0;if(!(0<e&&e<=this.pagesCount))return!1;const i=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:i}),t&&this.#I(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=e|0;if(this._pageLabels){const i=this._pageLabels.indexOf(e);i>=0&&(t=i+1)}this._setCurrentPageNumber(t,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return this._currentScale!==be?this._currentScale:lt}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#y(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#y(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!ut(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(e%=360,e<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;const t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#y(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const e=this;return ce(this,"_layerProperties",{get annotationEditorUIManager(){return e.#i},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#v(e){const t={annotationEditorMode:this.#n,annotationMode:this.#a,textLayerMode:this.#_};return e&&(!e.includes(oe.COPY)&&this.#_===O.ENABLE&&(t.textLayerMode=O.ENABLE_PERMISSIONS),e.includes(oe.MODIFY_CONTENTS)||(t.annotationEditorMode=W.DISABLE),!e.includes(oe.MODIFY_ANNOTATIONS)&&!e.includes(oe.FILL_INTERACTIVE_FORMS)&&this.#a===B.ENABLE_FORMS&&(t.annotationMode=B.ENABLE)),t}async#P(e){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return;const t=Promise.withResolvers();function i(){document.visibilityState==="hidden"&&t.resolve()}document.addEventListener("visibilitychange",i,{signal:e}),await Promise.race([this._onePageRenderedCapability.promise,t.promise]),document.removeEventListener("visibilitychange",i)}async getAllText(){const e=[],t=[];for(let i=1,n=this.pdfDocument.numPages;i<=n;++i){if(this.#f)return null;t.length=0;const s=await this.pdfDocument.getPage(i),{items:a}=await s.getTextContent();for(const o of a)o.str&&t.push(o.str),o.hasEOL&&t.push(`
`);e.push(ue(t.join("")))}return e.join(`
`)}#w(e,t){const i=document.getSelection(),{focusNode:n,anchorNode:s}=i;if(s&&n&&i.containsNode(this.#c)){if(this.#u||e===O.ENABLE_PERMISSIONS){t.preventDefault(),t.stopPropagation();return}this.#u=!0;const{classList:a}=this.viewer;a.add("copyAll");const o=new AbortController;window.addEventListener("keydown",l=>this.#f=l.key==="Escape",{signal:o.signal}),this.getAllText().then(async l=>{l!==null&&await navigator.clipboard.writeText(l)}).catch(l=>{console.warn(`Something goes wrong when extracting the text: ${l.message}`)}).finally(()=>{this.#u=!1,this.#f=!1,o.abort(),a.remove("copyAll")}),t.preventDefault(),t.stopPropagation()}}setDocument(e){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#i&&(this.#i.destroy(),this.#i=null)),this.pdfDocument=e,!e)return;const t=e.numPages,i=e.getPage(1),n=e.getOptionalContentConfig({intent:"display"}),s=this.#r?e.getPermissions():Promise.resolve(),{eventBus:a,pageColors:o,viewer:l}=this;this.#l=new AbortController;const{signal:h}=this.#l;if(t>he.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const p=this._scrollMode=S.PAGE;a.dispatch("scrollmodechanged",{source:this,mode:p})}this._pagesCapability.promise.then(()=>{a.dispatch("pagesloaded",{source:this,pagesCount:t})},()=>{});const u=p=>{const y=this._pages[p.pageNumber-1];y&&this.#e.push(y)};a._on("pagerender",u,{signal:h});const f=p=>{p.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:p.timestamp}),a._off("pagerendered",f))};a._on("pagerendered",f,{signal:h}),Promise.all([i,s]).then(([p,y])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(p),this._optionalContentConfigPromise=n;const{annotationEditorMode:b,annotationMode:v,textLayerMode:C}=this.#v(y);if(C!==O.DISABLE){const E=this.#c=document.createElement("div");E.id="hiddenCopyElement",l.before(E)}if(b!==W.DISABLE){const E=b;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):ot(E)?(this.#i=new ai(this.container,l,this.#t,a,e,o,this.#s,this.#d,this.#p),a.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#i}),E!==W.NONE&&this.#i.updateMode(E)):console.error(`Invalid AnnotationEditor mode: ${E}`)}const x=this._scrollMode===S.PAGE?null:l,L=this.currentScale,w=p.getViewport({scale:L*V.PDF_TO_CSS_UNITS});l.style.setProperty("--scale-factor",w.scale),(o?.foreground==="CanvasText"||o?.background==="Canvas")&&(l.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),l.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let E=1;E<=t;++E){const I=new Et({container:x,eventBus:a,id:E,scale:L,defaultViewport:w.clone(),optionalContentConfigPromise:n,renderingQueue:this.renderingQueue,textLayerMode:C,annotationMode:v,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:o,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#h});this._pages.push(I)}this._pages[0]?.setPdfPage(p),this._scrollMode===S.PAGE?this.#x():this._spreadMode!==M.NONE&&this._updateSpreadMode(),this.#P(h).then(async()=>{if(e!==this.pdfDocument)return;if(this.findController?.setDocument(e),this._scriptingManager?.setDocument(e),this.#c&&document.addEventListener("copy",this.#w.bind(this,C),{signal:h}),this.#i&&a.dispatch("annotationeditormodechanged",{source:this,mode:this.#n}),e.loadingParams.disableAutoFetch||t>he.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let E=t-1;if(E<=0){this._pagesCapability.resolve();return}for(let I=2;I<=t;++I){const m=e.getPage(I).then(_=>{const P=this._pages[I-1];P.pdfPage||P.setPdfPage(_),--E===0&&this._pagesCapability.resolve()},_=>{console.error(`Unable to get page ${I} to initialize viewer`,_),--E===0&&this._pagesCapability.resolve()});I%he.PAUSE_EAGER_PAGE_INIT===0&&await m}}),a.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:E})=>{e===this.pdfDocument&&E.Language&&(l.lang=E.Language)}),this.defaultRenderingQueue&&this.update()}).catch(p=>{console.error("Unable to initialize viewer",p),this._pagesCapability.reject(p)})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,i=this._pages.length;t<i;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=be,this._currentScaleValue=null,this._pageLabels=null,this.#e=new Tn(at),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=S.VERTICAL,this._previousScrollMode=S.UNKNOWN,this._spreadMode=M.NONE,this.#b={previousPageNumber:1,scrollDown:!0,pages:[]},this.#l?.abort(),this.#l=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#c?.remove(),this.#c=null}#x(){if(this._scrollMode!==S.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=this.#b,i=this.viewer;if(i.textContent="",t.pages.length=0,this._spreadMode===M.NONE&&!this.isInPresentationMode){const n=this._pages[e-1];i.append(n.div),t.pages.push(n)}else{const n=new Set,s=this._spreadMode-1;s===-1?n.add(e-1):e%2!==s?(n.add(e-1),n.add(e)):(n.add(e-2),n.add(e-1));const a=document.createElement("div");if(a.className="spread",this.isInPresentationMode){const o=document.createElement("div");o.className="dummyPage",a.append(o)}for(const o of n){const l=this._pages[o];l&&(a.append(l.div),t.pages.push(l))}i.append(a)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e}_scrollUpdate(){this.pagesCount!==0&&this.update()}#S(e,t=null){const{div:i,id:n}=e;if(this._currentPageNumber!==n&&this._setCurrentPageNumber(n),this._scrollMode===S.PAGE&&(this.#x(),this.update()),!t&&!this.isInPresentationMode){const s=i.offsetLeft+i.clientLeft,a=s+i.clientWidth,{scrollLeft:o,clientWidth:l}=this.container;(this._scrollMode===S.HORIZONTAL||s<o||a>o+l)&&(t={left:0,top:0})}ht(i,t),!this._currentScaleValue&&this._location&&(this._location=null)}#T(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#L(e,t,{noScroll:i=!1,preset:n=!1,drawingDelay:s=-1,origin:a=null}){if(this._currentScaleValue=t.toString(),this.#T(e)){n&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t});return}this.viewer.style.setProperty("--scale-factor",e*V.PDF_TO_CSS_UNITS);const o=s>=0&&s<1e3;this.refresh(!0,{scale:e,drawingDelay:o?s:-1}),o&&(this.#m=setTimeout(()=>{this.#m=null,this.refresh()},s));const l=this._currentScale;if(this._currentScale=e,!i){let h=this._currentPageNumber,u;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(h=this._location.pageNumber,u=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:h,destArray:u,allowNegativeOffset:!0}),Array.isArray(a)){const f=e/l-1,[p,y]=this.containerTopLeft;this.container.scrollLeft+=(a[0]-y)*f,this.container.scrollTop+=(a[1]-p)*f}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:n?t:void 0}),this.defaultRenderingQueue&&this.update()}get#C(){return this._spreadMode!==M.NONE&&this._scrollMode!==S.HORIZONTAL?2:1}#y(e,t){let i=parseFloat(e);if(i>0)t.preset=!1,this.#L(i,e,t);else{const n=this._pages[this._currentPageNumber-1];if(!n)return;let s=Ce,a=Re;this.isInPresentationMode?(s=a=4,this._spreadMode!==M.NONE&&(s*=2)):this.removePageBorders?s=a=0:this._scrollMode===S.HORIZONTAL&&([s,a]=[a,s]);const o=(this.container.clientWidth-s)/n.width*n.scale/this.#C,l=(this.container.clientHeight-a)/n.height*n.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=o;break;case"page-height":i=l;break;case"page-fit":i=Math.min(o,l);break;case"auto":const h=ke(n)?o:Math.min(l,o);i=Math.min(xt,h);break;default:console.error(`#setScale: "${e}" is an unknown zoom value.`);return}t.preset=!0,this.#L(i,e,t)}}#I(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#y(this._currentScaleValue,{noScroll:!0}),this.#S(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:n=!1}){if(!this.pdfDocument)return;const s=Number.isInteger(e)&&this._pages[e-1];if(!s){console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!t){this._setCurrentPageNumber(e,!0);return}let a=0,o=0,l=0,h=0,u,f;const p=s.rotation%180!==0,y=(p?s.height:s.width)/s.scale/V.PDF_TO_CSS_UNITS,b=(p?s.width:s.height)/s.scale/V.PDF_TO_CSS_UNITS;let v=0;switch(t[1].name){case"XYZ":a=t[2],o=t[3],v=t[4],a=a!==null?a:0,o=o!==null?o:b;break;case"Fit":case"FitB":v="page-fit";break;case"FitH":case"FitBH":o=t[2],v="page-width",o===null&&this._location?(a=this._location.left,o=this._location.top):(typeof o!="number"||o<0)&&(o=b);break;case"FitV":case"FitBV":a=t[2],l=y,h=b,v="page-height";break;case"FitR":a=t[2],o=t[3],l=t[4]-a,h=t[5]-o;let w=Ce,E=Re;this.removePageBorders&&(w=E=0),u=(this.container.clientWidth-w)/l/V.PDF_TO_CSS_UNITS,f=(this.container.clientHeight-E)/h/V.PDF_TO_CSS_UNITS,v=Math.min(Math.abs(u),Math.abs(f));break;default:console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`);return}if(n||(v&&v!==this._currentScale?this.currentScaleValue=v:this._currentScale===be&&(this.currentScaleValue=yt)),v==="page-fit"&&!t[4]){this.#S(s);return}const C=[s.viewport.convertToViewportPoint(a,o),s.viewport.convertToViewportPoint(a+l,o+h)];let x=Math.min(C[0][0],C[1][0]),L=Math.min(C[0][1],C[1][1]);i||(x=Math.max(x,0),L=Math.max(L,0)),this.#S(s,{left:x,top:L})}_updateLocation(e){const t=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===t?Math.round(t*1e4)/100:i,s=e.id,a=this._pages[s-1],o=this.container,l=a.getPagePoint(o.scrollLeft-e.x,o.scrollTop-e.y),h=Math.round(l[0]),u=Math.round(l[1]);let f=`#page=${s}`;this.isInPresentationMode||(f+=`&zoom=${n},${h},${u}`),this._location={pageNumber:s,scale:n,top:u,left:h,rotation:this._pagesRotation,pdfOpenParams:f}}update(){const e=this._getVisiblePages(),t=e.views,i=t.length;if(i===0)return;const n=Math.max(at,2*i+1);this.#e.resize(n,e.ids),this.renderingQueue.renderHighestPriority(e);const s=this._spreadMode===M.NONE&&(this._scrollMode===S.PAGE||this._scrollMode===S.VERTICAL),a=this._currentPageNumber;let o=!1;for(const l of t){if(l.percent<100)break;if(l.id===a&&s){o=!0;break}}this._setCurrentPageNumber(o?a:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===X.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===X.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===S.PAGE?this.#b.pages:this._pages,t=this._scrollMode===S.HORIZONTAL,i=t&&this._isContainerRtl;return At({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:i})}cleanup(){for(const e of this._pages)e.renderingState!==R.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}async#R(e){if(e.pdfPage)return e.pdfPage;try{const t=await this.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(t),t}catch(t){return console.error("Unable to get page for page view",t),null}}#N(e){if(e.first?.id===1)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case S.PAGE:return this.#b.scrollDown;case S.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){const t=e||this._getVisiblePages(),i=this.#N(t),n=this._spreadMode!==M.NONE&&this._scrollMode!==S.HORIZONTAL,s=this.renderingQueue.getHighestPriority(t,this._pages,i,n);return s?(this.#R(s).then(()=>{this.renderingQueue.renderView(s)}),!0):!1}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,i=this._pages.length;t<i;++t){const n=this._pages[t];if(n.width!==e.width||n.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(t=>{const i=t.pdfPage.getViewport({scale:1}),n=ke(i);if(e===void 0)e=n;else if(this.enablePrintAutoRotate&&n!==e)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!Tt(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>he.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===S.HORIZONTAL),i.classList.toggle("scrollWrapped",t===S.WRAPPED),!(!this.pdfDocument||!e)&&(t===S.PAGE?this.#x():this._previousScrollMode===S.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#y(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!Ct(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;const t=this.viewer,i=this._pages;if(this._scrollMode===S.PAGE)this.#x();else if(t.textContent="",this._spreadMode===M.NONE)for(const n of this._pages)t.append(n.div);else{const n=this._spreadMode-1;let s=null;for(let a=0,o=i.length;a<o;++a)s===null?(s=document.createElement("div"),s.className="spread",t.append(s)):a%2===n&&(s=s.cloneNode(!1),t.append(s)),s.append(i[a].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#y(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case S.WRAPPED:{const{views:i}=this._getVisiblePages(),n=new Map;for(const{id:s,y:a,percent:o,widthPercent:l}of i){if(o===0||l<100)continue;let h=n.get(a);h||n.set(a,h||=[]),h.push(s)}for(const s of n.values()){const a=s.indexOf(e);if(a===-1)continue;const o=s.length;if(o===1)break;if(t)for(let l=a-1,h=0;l>=h;l--){const u=s[l],f=s[l+1]-1;if(u<f)return e-f}else for(let l=a+1,h=o;l<h;l++){const u=s[l],f=s[l-1]+1;if(u>f)return f-e}if(t){const l=s[0];if(l<e)return e-l+1}else{const l=s[o-1];if(l>e)return l-e+1}break}break}case S.HORIZONTAL:break;case S.PAGE:case S.VERTICAL:{if(this._spreadMode===M.NONE)break;const i=this._spreadMode-1;if(t&&e%2!==i)break;if(!t&&e%2===i)break;const{views:n}=this._getVisiblePages(),s=t?e-1:e+1;for(const{id:a,percent:o,widthPercent:l}of n)if(a===s){if(o>0&&l===100)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const i=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+i,t),!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}updateScale({drawingDelay:e,scaleFactor:t=null,steps:i=null,origin:n}){if(i===null&&t===null)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(t>0&&t!==1)s=Math.round(s*t*100)/100;else if(i){const a=i>0?Te:1/Te,o=i>0?Math.ceil:Math.floor;i=Math.abs(i);do s=o((s*a).toFixed(2)*10)/10;while(--i>0)}s=Math.max(vt,Math.min(Pt,s)),this.#y(s,{noScroll:!1,drawingDelay:e,origin:n})}increaseScale(e={}){this.updateScale({...e,steps:e.steps??1})}decreaseScale(e={}){this.updateScale({...e,steps:-(e.steps??1)})}#A(e=this.container.clientHeight){e!==this.#g&&(this.#g=e,Rt.setProperty("--viewer-container-height",`${e}px`))}#M(e){for(const t of e)if(t.target===this.container){this.#A(Math.floor(t.borderBoxSize[0].blockSize)),this.#o=null;break}}get containerTopLeft(){return this.#o||=[this.container.offsetTop,this.container.offsetLeft]}get annotationEditorMode(){return this.#i?this.#n:W.DISABLE}set annotationEditorMode({mode:e,editId:t=null,isFromKeyboard:i=!1}){if(!this.#i)throw new Error("The AnnotationEditor is not enabled.");if(this.#n!==e){if(!ot(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);this.pdfDocument&&(this.#n=e,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:e}),this.#i.updateMode(e,t,i))}}set annotationEditorParams({type:e,value:t}){if(!this.#i)throw new Error("The AnnotationEditor is not enabled.");this.#i.updateParams(e,t)}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(const i of this._pages)i.update(t);this.#m!==null&&(clearTimeout(this.#m),this.#m=null),e||this.update()}}}class Cn extends wt{_resetView(){super._resetView(),this._scrollMode=S.PAGE,this._spreadMode=M.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}T.AnnotationLayerBuilder;T.DownloadManager;var ns=T.EventBus;T.FindState;T.GenericL10n;T.LinkTarget;T.PDFFindController;T.PDFHistory;var ss=T.PDFLinkService;T.PDFPageView;T.PDFScriptingManager;T.PDFSinglePageViewer;var rs=T.PDFViewer;T.ProgressBar;T.RenderingStates;T.ScrollMode;T.SimpleLinkService;T.SpreadMode;T.StructTreeLayerBuilder;T.TextLayerBuilder;T.XfaLayerBuilder;T.parseQueryString;export{ns as EventBus,ss as PDFLinkService,rs as PDFViewer};
